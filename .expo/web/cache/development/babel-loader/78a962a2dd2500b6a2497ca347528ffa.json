{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\Het Patel\\\\Desktop\\\\vscode\\\\stockappagain\\\\Components\\\\Stock.js\";\nimport React, { useState, useEffect } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport { av_key } from \"../config\";\nimport Chart from \"./Chart\";\n\nvar Parser = require(\"fast-html-parser\");\n\nvar Stock = function Stock(_ref) {\n  var route = _ref.route,\n      navigation = _ref.navigation;\n  var _route$params$x = route.params.x,\n      ticker = _route$params$x.ticker,\n      name = _route$params$x.name;\n\n  var _useState = useState([\"\"]),\n      _useState2 = _slicedToArray(_useState, 2),\n      slables = _useState2[0],\n      setslables = _useState2[1];\n\n  var _useState3 = useState([0]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      prices = _useState4[0],\n      setprices = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      price = _useState6[0],\n      setprice = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      high = _useState8[0],\n      sethigh = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      low = _useState10[0],\n      setlow = _useState10[1];\n\n  var _useState11 = useState(\"\"),\n      _useState12 = _slicedToArray(_useState11, 2),\n      volume = _useState12[0],\n      setvolume = _useState12[1];\n\n  var _useState13 = useState(\"\"),\n      _useState14 = _slicedToArray(_useState13, 2),\n      change = _useState14[0],\n      setchange = _useState14[1];\n\n  var _useState15 = useState([]),\n      _useState16 = _slicedToArray(_useState15, 2),\n      links = _useState16[0],\n      setlinks = _useState16[1];\n\n  var get_intraday = function get_intraday(interval) {\n    fetch(\"https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol=\" + ticker + \"&interval=\" + interval + \"min&apikey=\" + av_key).then(function (res) {\n      return res.json();\n    }).then(function (resJson) {\n      var raw_data = resJson[\"Time Series (\" + interval + \"min)\"];\n      var processed_data = [];\n      var label_data = [];\n      var counter = 1;\n\n      for (var obj in raw_data) {\n        var _price = raw_data[obj];\n        processed_data.unshift(parseFloat(_price[\"1. open\"]));\n        label_data.unshift(counter % 20 == 0 || counter == 1 ? obj.substr(-8, 5) : \"\");\n        counter += 1;\n      }\n\n      setprices(processed_data);\n      setslables(label_data);\n    });\n  };\n\n  var get_quote = function get_quote() {\n    fetch(\"https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=\" + ticker + \"&apikey=\" + av_key).then(function (res) {\n      return res.json();\n    }).then(function (resJson) {\n      var data = resJson[\"Global Quote\"];\n      var vals = Object.values(data);\n      setprice(vals[4]);\n      sethigh(vals[2]);\n      setlow(vals[3]);\n      setvolume(vals[5]);\n      setchange(vals[9]);\n    });\n  };\n\n  var get_news = function get_news() {\n    fetch(\"https://www.bing.com/news/search?q=\" + name).then(function (res) {\n      return res.text();\n    }).then(function (body) {\n      var html = Parser.parse(body);\n      var arr = html.querySelectorAll(\".news-card.newsitem.cardcommon.b_cards2\");\n      var urls = arr.map(function (x) {\n        var url = x.rawAttributes.url;\n        var imgobj = x.querySelector(\"img\").rawAttributes;\n        var thumbnail = \"https://www.bing.com\" + (\"data-src\" in imgobj ? imgobj[\"data-src\"] : imgobj.src);\n        var sample = x.querySelector(\".snippet\").rawAttributes.title;\n        return {\n          link: url,\n          img: thumbnail,\n          snippet: sample\n        };\n      });\n      setlinks(urls);\n    });\n  };\n\n  useEffect(function () {\n    get_intraday(5);\n    get_quote();\n    get_news();\n  }, []);\n  return React.createElement(ScrollView, {\n    style: {\n      alignItems: \"center\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 5\n    }\n  }, React.createElement(View, {\n    style: {\n      marginTop: 50\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }\n  }), React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }\n  }, ticker + \" - \" + name), React.createElement(View, {\n    style: {\n      alignItems: \"center\",\n      marginTop: 30\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }\n  }, React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return get_intraday(1);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 11\n    }\n  }, \"1min\")), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return get_intraday(5);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 11\n    }\n  }, \"5min\")), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return get_intraday(15);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 11\n    }\n  }, \"15min\")), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return get_intraday(30);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 11\n    }\n  }, \"30min\")), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return get_intraday(60);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 11\n    }\n  }, \"60min\"))), React.createElement(Chart, {\n    slables: slables,\n    prices: prices,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }\n  }), React.createElement(View, {\n    style: {\n      alignItems: \"center\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 9\n    }\n  }, \"price - \" + price), React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 9\n    }\n  }, \"high - \" + high), React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 9\n    }\n  }, \"low - \" + low), React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 9\n    }\n  }, \"volume - \" + volume), React.createElement(Text, {\n    style: change.includes(\"-\") ? {\n      color: \"red\"\n    } : {\n      color: \"green\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 9\n    }\n  }, change)), React.createElement(View, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }\n  }, links.map(function (x, i) {\n    return React.createElement(TouchableOpacity, {\n      key: i,\n      style: styles.card,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 13\n      }\n    }, React.createElement(View, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 15\n      }\n    }, React.createElement(Text, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 17\n      }\n    }, x.snippet)));\n  })));\n};\n\nvar styles = StyleSheet.create({\n  card: {\n    marginTop: 4,\n    marginLeft: 4,\n    marginRight: 4,\n    backgroundColor: \"blue\",\n    borderRadius: 30\n  }\n});\nexport default Stock;","map":{"version":3,"sources":["C:/Users/Het Patel/Desktop/vscode/stockappagain/Components/Stock.js"],"names":["React","useState","useEffect","av_key","Chart","Parser","require","Stock","route","navigation","params","x","ticker","name","slables","setslables","prices","setprices","price","setprice","high","sethigh","low","setlow","volume","setvolume","change","setchange","links","setlinks","get_intraday","interval","fetch","then","res","json","resJson","raw_data","processed_data","label_data","counter","obj","unshift","parseFloat","substr","get_quote","data","vals","Object","values","get_news","text","body","html","parse","arr","querySelectorAll","urls","map","url","rawAttributes","imgobj","querySelector","thumbnail","src","sample","title","link","img","snippet","alignItems","marginTop","includes","color","i","styles","card","StyleSheet","create","marginLeft","marginRight","backgroundColor","borderRadius"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  View,\r\n  Text,\r\n  TouchableOpacity,\r\n  StyleSheet,\r\n  ScrollView,\r\n} from \"react-native\";\r\nimport { av_key } from \"../config\";\r\nimport Chart from \"./Chart\";\r\n\r\nconst Parser = require(\"fast-html-parser\");\r\n\r\nconst Stock = ({ route, navigation }) => {\r\n  const { ticker, name } = route.params.x;\r\n\r\n  const [slables, setslables] = useState([\"\"]);\r\n  const [prices, setprices] = useState([0]);\r\n  const [price, setprice] = useState(\"\");\r\n  const [high, sethigh] = useState(\"\");\r\n  const [low, setlow] = useState(\"\");\r\n  const [volume, setvolume] = useState(\"\");\r\n  const [change, setchange] = useState(\"\");\r\n\r\n  const [links, setlinks] = useState([]);\r\n\r\n  const get_intraday = (interval) => {\r\n    fetch(\r\n      \"https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol=\" +\r\n        ticker +\r\n        \"&interval=\" +\r\n        interval +\r\n        \"min&apikey=\" +\r\n        av_key\r\n    )\r\n      .then((res) => res.json())\r\n      .then((resJson) => {\r\n        const raw_data = resJson[\"Time Series (\" + interval + \"min)\"];\r\n        const processed_data = [];\r\n        const label_data = [];\r\n        var counter = 1;\r\n        for (const obj in raw_data) {\r\n          const price = raw_data[obj];\r\n          processed_data.unshift(parseFloat(price[\"1. open\"]));\r\n          label_data.unshift(\r\n            counter % 20 == 0 || counter == 1 ? obj.substr(-8, 5) : \"\"\r\n          );\r\n          counter += 1;\r\n        }\r\n        setprices(processed_data);\r\n        setslables(label_data);\r\n      });\r\n  };\r\n\r\n  const get_quote = () => {\r\n    fetch(\r\n      \"https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=\" +\r\n        ticker +\r\n        \"&apikey=\" +\r\n        av_key\r\n    )\r\n      .then((res) => res.json())\r\n      .then((resJson) => {\r\n        const data = resJson[\"Global Quote\"];\r\n        const vals = Object.values(data);\r\n        setprice(vals[4]);\r\n        sethigh(vals[2]);\r\n        setlow(vals[3]);\r\n        setvolume(vals[5]);\r\n        setchange(vals[9]);\r\n      });\r\n  };\r\n\r\n  const get_news = () => {\r\n    fetch(\"https://www.bing.com/news/search?q=\" + name)\r\n      .then((res) => res.text())\r\n      .then((body) => {\r\n        const html = Parser.parse(body);\r\n        const arr = html.querySelectorAll(\r\n          \".news-card.newsitem.cardcommon.b_cards2\"\r\n        );\r\n        const urls = arr.map((x) => {\r\n          const url = x.rawAttributes.url;\r\n          const imgobj = x.querySelector(\"img\").rawAttributes;\r\n          const thumbnail =\r\n            \"https://www.bing.com\" +\r\n            (\"data-src\" in imgobj ? imgobj[\"data-src\"] : imgobj.src);\r\n          const sample = x.querySelector(\".snippet\").rawAttributes.title;\r\n          return { link: url, img: thumbnail, snippet: sample };\r\n        });\r\n        setlinks(urls);\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    get_intraday(5);\r\n    get_quote();\r\n    get_news();\r\n  }, []);\r\n\r\n  return (\r\n    <ScrollView style={{ alignItems: \"center\" }}>\r\n      <View style={{ marginTop: 50 }}></View>\r\n      <Text>{ticker + \" - \" + name}</Text>\r\n      <View style={{ alignItems: \"center\", marginTop: 30 }}>\r\n        <TouchableOpacity onPress={() => get_intraday(1)}>\r\n          <Text>1min</Text>\r\n        </TouchableOpacity>\r\n        <TouchableOpacity onPress={() => get_intraday(5)}>\r\n          <Text>5min</Text>\r\n        </TouchableOpacity>\r\n        <TouchableOpacity onPress={() => get_intraday(15)}>\r\n          <Text>15min</Text>\r\n        </TouchableOpacity>\r\n        <TouchableOpacity onPress={() => get_intraday(30)}>\r\n          <Text>30min</Text>\r\n        </TouchableOpacity>\r\n        <TouchableOpacity onPress={() => get_intraday(60)}>\r\n          <Text>60min</Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n\r\n      <Chart slables={slables} prices={prices}></Chart>\r\n\r\n      <View style={{ alignItems: \"center\" }}>\r\n        <Text>{\"price - \" + price}</Text>\r\n        <Text>{\"high - \" + high}</Text>\r\n        <Text>{\"low - \" + low}</Text>\r\n        <Text>{\"volume - \" + volume}</Text>\r\n        <Text\r\n          style={change.includes(\"-\") ? { color: \"red\" } : { color: \"green\" }}\r\n        >\r\n          {change}\r\n        </Text>\r\n      </View>\r\n\r\n      <View>\r\n        {links.map((x, i) => {\r\n          return (\r\n            <TouchableOpacity key={i} style={styles.card}>\r\n              <View>\r\n                <Text>{x.snippet}</Text>\r\n              </View>\r\n            </TouchableOpacity>\r\n          );\r\n        })}\r\n      </View>\r\n    </ScrollView>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  card: {\r\n    marginTop: 4,\r\n    marginLeft: 4,\r\n    marginRight: 4,\r\n    backgroundColor: \"blue\",\r\n    borderRadius: 30,\r\n  },\r\n});\r\n\r\nexport default Stock;\r\n"]},"metadata":{},"sourceType":"module"}