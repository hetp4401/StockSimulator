{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/adarsh/Documents/StocksUI/Components/Stock.js\";\nimport React, { useState, useEffect } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport { av_key } from \"../config\";\nimport Chart from \"./Chart\";\nimport ArticleLink from \"./ArticleLink\";\n\nvar Parser = require(\"fast-html-parser\");\n\nvar Stock = function Stock(_ref) {\n  var route = _ref.route,\n      navigation = _ref.navigation;\n  var _route$params$x = route.params.x,\n      ticker = _route$params$x.ticker,\n      name = _route$params$x.name;\n\n  var _useState = useState([\"\"]),\n      _useState2 = _slicedToArray(_useState, 2),\n      slables = _useState2[0],\n      setslables = _useState2[1];\n\n  var _useState3 = useState([0]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      prices = _useState4[0],\n      setprices = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      price = _useState6[0],\n      setprice = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      high = _useState8[0],\n      sethigh = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      low = _useState10[0],\n      setlow = _useState10[1];\n\n  var _useState11 = useState(\"\"),\n      _useState12 = _slicedToArray(_useState11, 2),\n      volume = _useState12[0],\n      setvolume = _useState12[1];\n\n  var _useState13 = useState(\"\"),\n      _useState14 = _slicedToArray(_useState13, 2),\n      change = _useState14[0],\n      setchange = _useState14[1];\n\n  var _useState15 = useState([]),\n      _useState16 = _slicedToArray(_useState15, 2),\n      links = _useState16[0],\n      setlinks = _useState16[1];\n\n  var _useState17 = useState(true),\n      _useState18 = _slicedToArray(_useState17, 2),\n      loading = _useState18[0],\n      setloading = _useState18[1];\n\n  var _useState19 = useState(true),\n      _useState20 = _slicedToArray(_useState19, 2),\n      loading2 = _useState20[0],\n      setloading2 = _useState20[1];\n\n  var _useState21 = useState(5),\n      _useState22 = _slicedToArray(_useState21, 2),\n      selected = _useState22[0],\n      setselected = _useState22[1];\n\n  var get_intraday = function get_intraday(interval) {\n    fetch(\"https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol=\" + ticker + \"&interval=\" + interval + \"min&apikey=\" + av_key).then(function (res) {\n      return res.json();\n    }).then(function (resJson) {\n      var raw_data = resJson[\"Time Series (\" + interval + \"min)\"];\n      var processed_data = [];\n      var label_data = [];\n      var counter = 1;\n\n      for (var obj in raw_data) {\n        var _price = raw_data[obj];\n        processed_data.unshift(parseFloat(_price[\"1. open\"]));\n        label_data.unshift(counter % 20 == 0 || counter == 1 ? obj.substr(-8, 5) : \"\");\n        counter += 1;\n      }\n\n      setprices(processed_data);\n      setslables(label_data);\n      setloading(false);\n    });\n  };\n\n  var get_quote = function get_quote() {\n    fetch(\"https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=\" + ticker + \"&apikey=\" + av_key).then(function (res) {\n      return res.json();\n    }).then(function (resJson) {\n      var data = resJson[\"Global Quote\"];\n      var vals = Object.values(data);\n      setprice(vals[4]);\n      sethigh(vals[2]);\n      setlow(vals[3]);\n      setvolume(vals[5]);\n      setchange(vals[9]);\n    });\n  };\n\n  var get_news = function get_news() {\n    fetch(\"https://www.bing.com/news/search?q=\" + name).then(function (res) {\n      return res.text();\n    }).then(function (body) {\n      var html = Parser.parse(body);\n      var arr = html.querySelectorAll(\".news-card.newsitem.cardcommon.b_cards2\");\n      var urls = arr.map(function (x) {\n        var url = x.rawAttributes.url;\n        var imgobj = x.querySelector(\"img\").rawAttributes;\n        var thumbnail = \"https://www.bing.com\" + (\"data-src\" in imgobj ? imgobj[\"data-src\"] : imgobj.src);\n        var sample = x.querySelector(\".snippet\").rawAttributes.title;\n        return {\n          link: url,\n          img: thumbnail,\n          snippet: sample\n        };\n      });\n      setlinks(urls);\n      setloading2(false);\n    });\n  };\n\n  var change_select = function change_select(x) {\n    setselected(x);\n    get_intraday(x);\n  };\n\n  useEffect(function () {\n    get_intraday(5);\n    get_quote();\n    get_news();\n  }, []);\n  return loading ? React.createElement(ActivityIndicator, {\n    size: 100,\n    color: \"#0000ff\",\n    style: {\n      marginTop: Dimensions.get(\"window\").height * 0.5\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 5\n    }\n  }) : React.createElement(ScrollView, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 5\n    }\n  }, React.createElement(View, {\n    style: {\n      marginTop: 50\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }\n  }), React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }\n  }, ticker + \" - \" + name), React.createElement(View, {\n    style: {\n      alignItems: \"center\",\n      marginTop: 30\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }\n  }, React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return change_select(1);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: selected == 1 ? {\n      color: \"red\"\n    } : {\n      color: \"black\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 11\n    }\n  }, \"1min\")), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return change_select(5);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: selected == 5 ? {\n      color: \"red\"\n    } : {\n      color: \"black\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 11\n    }\n  }, \"5min\")), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return change_select(15);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: selected == 15 ? {\n      color: \"red\"\n    } : {\n      color: \"black\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 11\n    }\n  }, \"15min\")), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return change_select(30);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: selected == 30 ? {\n      color: \"red\"\n    } : {\n      color: \"black\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 11\n    }\n  }, \"30min\")), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return change_select(60);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: selected == 60 ? {\n      color: \"red\"\n    } : {\n      color: \"black\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 11\n    }\n  }, \"60min\"))), React.createElement(Chart, {\n    slables: slables,\n    prices: prices,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }\n  }), React.createElement(View, {\n    style: {\n      alignItems: \"center\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 9\n    }\n  }, \"price - \" + price), React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 9\n    }\n  }, \"high - \" + high), React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 9\n    }\n  }, \"low - \" + low), React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 9\n    }\n  }, \"volume - \" + volume), React.createElement(Text, {\n    style: change.includes(\"-\") ? {\n      color: \"red\"\n    } : {\n      color: \"green\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 9\n    }\n  }, change)), React.createElement(Text, {\n    style: {\n      marginLeft: 20,\n      marginTop: 30\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 7\n    }\n  }, \"Latest News\"), React.createElement(View, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 7\n    }\n  }, loading2 ? React.createElement(ActivityIndicator, {\n    size: \"small\",\n    color: \"#0000ff\",\n    style: {\n      marginTop: 20\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 11\n    }\n  }) : links.map(function (x, i) {\n    return React.createElement(ArticleLink, {\n      x: x,\n      key: i,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 20\n      }\n    });\n  })));\n};\n\nexport default Stock;","map":{"version":3,"sources":["/Users/adarsh/Documents/StocksUI/Components/Stock.js"],"names":["React","useState","useEffect","av_key","Chart","ArticleLink","Parser","require","Stock","route","navigation","params","x","ticker","name","slables","setslables","prices","setprices","price","setprice","high","sethigh","low","setlow","volume","setvolume","change","setchange","links","setlinks","loading","setloading","loading2","setloading2","selected","setselected","get_intraday","interval","fetch","then","res","json","resJson","raw_data","processed_data","label_data","counter","obj","unshift","parseFloat","substr","get_quote","data","vals","Object","values","get_news","text","body","html","parse","arr","querySelectorAll","urls","map","url","rawAttributes","imgobj","querySelector","thumbnail","src","sample","title","link","img","snippet","change_select","marginTop","Dimensions","get","height","alignItems","color","includes","marginLeft","i"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n  View,\n  Text,\n  TouchableOpacity,\n  StyleSheet,\n  ScrollView,\n  ActivityIndicator,\n  Dimensions,\n} from \"react-native\";\nimport { av_key } from \"../config\";\nimport Chart from \"./Chart\";\nimport ArticleLink from \"./ArticleLink\";\n\nconst Parser = require(\"fast-html-parser\");\n\nconst Stock = ({ route, navigation }) => {\n  const { ticker, name } = route.params.x;\n\n  const [slables, setslables] = useState([\"\"]);\n  const [prices, setprices] = useState([0]);\n  const [price, setprice] = useState(\"\");\n  const [high, sethigh] = useState(\"\");\n  const [low, setlow] = useState(\"\");\n  const [volume, setvolume] = useState(\"\");\n  const [change, setchange] = useState(\"\");\n\n  const [links, setlinks] = useState([]);\n\n  const [loading, setloading] = useState(true);\n  const [loading2, setloading2] = useState(true);\n\n  const [selected, setselected] = useState(5);\n\n  const get_intraday = (interval) => {\n    fetch(\n      \"https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol=\" +\n        ticker +\n        \"&interval=\" +\n        interval +\n        \"min&apikey=\" +\n        av_key\n    )\n      .then((res) => res.json())\n      .then((resJson) => {\n        const raw_data = resJson[\"Time Series (\" + interval + \"min)\"];\n        const processed_data = [];\n        const label_data = [];\n        var counter = 1;\n        for (const obj in raw_data) {\n          const price = raw_data[obj];\n          processed_data.unshift(parseFloat(price[\"1. open\"]));\n          label_data.unshift(\n            counter % 20 == 0 || counter == 1 ? obj.substr(-8, 5) : \"\"\n          );\n          counter += 1;\n        }\n        setprices(processed_data);\n        setslables(label_data);\n        setloading(false);\n      });\n  };\n\n  const get_quote = () => {\n    fetch(\n      \"https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=\" +\n        ticker +\n        \"&apikey=\" +\n        av_key\n    )\n      .then((res) => res.json())\n      .then((resJson) => {\n        const data = resJson[\"Global Quote\"];\n        const vals = Object.values(data);\n        setprice(vals[4]);\n        sethigh(vals[2]);\n        setlow(vals[3]);\n        setvolume(vals[5]);\n        setchange(vals[9]);\n      });\n  };\n\n  const get_news = () => {\n    fetch(\"https://www.bing.com/news/search?q=\" + name)\n      .then((res) => res.text())\n      .then((body) => {\n        const html = Parser.parse(body);\n        const arr = html.querySelectorAll(\n          \".news-card.newsitem.cardcommon.b_cards2\"\n        );\n        const urls = arr.map((x) => {\n          const url = x.rawAttributes.url;\n          const imgobj = x.querySelector(\"img\").rawAttributes;\n          const thumbnail =\n            \"https://www.bing.com\" +\n            (\"data-src\" in imgobj ? imgobj[\"data-src\"] : imgobj.src);\n          const sample = x.querySelector(\".snippet\").rawAttributes.title;\n          return { link: url, img: thumbnail, snippet: sample };\n        });\n        setlinks(urls);\n        setloading2(false);\n      });\n  };\n\n  const change_select = (x) => {\n    setselected(x);\n    get_intraday(x);\n  };\n\n  useEffect(() => {\n    get_intraday(5);\n    get_quote();\n    get_news();\n  }, []);\n\n  return loading ? (\n    <ActivityIndicator\n      size={100}\n      color=\"#0000ff\"\n      style={{ marginTop: Dimensions.get(\"window\").height * 0.5 }}\n    />\n  ) : (\n    <ScrollView>\n      <View style={{ marginTop: 50 }}></View>\n      <Text>{ticker + \" - \" + name}</Text>\n      <View style={{ alignItems: \"center\", marginTop: 30 }}>\n        <TouchableOpacity onPress={() => change_select(1)}>\n          <Text style={selected == 1 ? { color: \"red\" } : { color: \"black\" }}>\n            1min\n          </Text>\n        </TouchableOpacity>\n        <TouchableOpacity onPress={() => change_select(5)}>\n          <Text style={selected == 5 ? { color: \"red\" } : { color: \"black\" }}>\n            5min\n          </Text>\n        </TouchableOpacity>\n        <TouchableOpacity onPress={() => change_select(15)}>\n          <Text style={selected == 15 ? { color: \"red\" } : { color: \"black\" }}>\n            15min\n          </Text>\n        </TouchableOpacity>\n        <TouchableOpacity onPress={() => change_select(30)}>\n          <Text style={selected == 30 ? { color: \"red\" } : { color: \"black\" }}>\n            30min\n          </Text>\n        </TouchableOpacity>\n        <TouchableOpacity onPress={() => change_select(60)}>\n          <Text style={selected == 60 ? { color: \"red\" } : { color: \"black\" }}>\n            60min\n          </Text>\n        </TouchableOpacity>\n      </View>\n\n      <Chart slables={slables} prices={prices}></Chart>\n\n      <View style={{ alignItems: \"center\" }}>\n        <Text>{\"price - \" + price}</Text>\n        <Text>{\"high - \" + high}</Text>\n        <Text>{\"low - \" + low}</Text>\n        <Text>{\"volume - \" + volume}</Text>\n        <Text\n          style={change.includes(\"-\") ? { color: \"red\" } : { color: \"green\" }}\n        >\n          {change}\n        </Text>\n      </View>\n\n      <Text style={{ marginLeft: 20, marginTop: 30 }}>Latest News</Text>\n\n      <View>\n        {loading2 ? (\n          <ActivityIndicator\n            size=\"small\"\n            color=\"#0000ff\"\n            style={{ marginTop: 20 }}\n          />\n        ) : (\n          links.map((x, i) => {\n            return <ArticleLink x={x} key={i} />;\n          })\n        )}\n      </View>\n    </ScrollView>\n  );\n};\n\nexport default Stock;\n"]},"metadata":{},"sourceType":"module"}