{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\Het Patel\\\\Desktop\\\\stockappagain\\\\Components\\\\Stock.js\";\nimport React, { useState, useEffect } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport { av_key } from \"../config\";\nimport Chart from \"./Chart\";\n\nvar Parser = require(\"fast-html-parser\");\n\nvar Stock = function Stock(_ref) {\n  var route = _ref.route,\n      navigation = _ref.navigation;\n  var _route$params$x = route.params.x,\n      ticker = _route$params$x.ticker,\n      name = _route$params$x.name;\n\n  var _useState = useState([\"\"]),\n      _useState2 = _slicedToArray(_useState, 2),\n      slables = _useState2[0],\n      setslables = _useState2[1];\n\n  var _useState3 = useState([0]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      prices = _useState4[0],\n      setprices = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      price = _useState6[0],\n      setprice = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      high = _useState8[0],\n      sethigh = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      low = _useState10[0],\n      setlow = _useState10[1];\n\n  var _useState11 = useState(\"\"),\n      _useState12 = _slicedToArray(_useState11, 2),\n      volume = _useState12[0],\n      setvolume = _useState12[1];\n\n  var _useState13 = useState(\"\"),\n      _useState14 = _slicedToArray(_useState13, 2),\n      change = _useState14[0],\n      setchange = _useState14[1];\n\n  var _useState15 = useState([]),\n      _useState16 = _slicedToArray(_useState15, 2),\n      links = _useState16[0],\n      setlinks = _useState16[1];\n\n  var _useState17 = useState(true),\n      _useState18 = _slicedToArray(_useState17, 2),\n      loading = _useState18[0],\n      setloading = _useState18[1];\n\n  var _useState19 = useState(true),\n      _useState20 = _slicedToArray(_useState19, 2),\n      loading2 = _useState20[0],\n      setloading2 = _useState20[1];\n\n  var _useState21 = useState(true),\n      _useState22 = _slicedToArray(_useState21, 2),\n      loading3 = _useState22[0],\n      setloading3 = _useState22[1];\n\n  var _useState23 = useState(5),\n      _useState24 = _slicedToArray(_useState23, 2),\n      selected = _useState24[0],\n      setselected = _useState24[1];\n\n  var get_intraday = function get_intraday(interval) {\n    fetch(\"https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol=\" + ticker + \"&interval=\" + interval + \"min&apikey=\" + av_key).then(function (res) {\n      return res.json();\n    }).then(function (resJson) {\n      var raw_data = resJson[\"Time Series (\" + interval + \"min)\"];\n      var processed_data = [];\n      var label_data = [];\n      var counter = 1;\n\n      for (var obj in raw_data) {\n        var _price = raw_data[obj];\n        processed_data.unshift(parseFloat(_price[\"1. open\"]));\n        label_data.unshift(counter % 20 == 0 || counter == 1 ? obj.substr(-8, 5) : \"\");\n        counter += 1;\n      }\n\n      setprices(processed_data);\n      setslables(label_data);\n      setloading(false);\n    });\n  };\n\n  var get_quote = function get_quote() {\n    fetch(\"https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=\" + ticker + \"&apikey=\" + av_key).then(function (res) {\n      return res.json();\n    }).then(function (resJson) {\n      var data = resJson[\"Global Quote\"];\n      var vals = Object.values(data);\n      setprice(vals[4]);\n      sethigh(vals[2]);\n      setlow(vals[3]);\n      setvolume(vals[5]);\n      setchange(vals[9]);\n      setloading2(false);\n    });\n  };\n\n  var get_news = function get_news() {\n    fetch(\"https://www.bing.com/news/search?q=\" + name).then(function (res) {\n      return res.text();\n    }).then(function (body) {\n      var html = Parser.parse(body);\n      var arr = html.querySelectorAll(\".news-card.newsitem.cardcommon.b_cards2\");\n      var urls = arr.map(function (x) {\n        var url = x.rawAttributes.url;\n        var imgobj = x.querySelector(\"img\").rawAttributes;\n        var thumbnail = \"https://www.bing.com\" + (\"data-src\" in imgobj ? imgobj[\"data-src\"] : imgobj.src);\n        var sample = x.querySelector(\".snippet\").rawAttributes.title;\n        return {\n          link: url,\n          img: thumbnail,\n          snippet: sample\n        };\n      });\n      setlinks(urls);\n      setloading3(false);\n    });\n  };\n\n  var on_click = function on_click(x) {\n    return _regeneratorRuntime.async(function on_click$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            setselected(x);\n            get_intraday(x);\n\n          case 2:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  useEffect(function () {\n    get_intraday(5);\n    get_quote();\n    get_news();\n  }, []);\n  return loading ? React.createElement(ActivityIndicator, {\n    size: 100,\n    color: \"#0000ff\",\n    style: {\n      marginTop: Dimensions.get(\"window\").height * 0.5\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 5\n    }\n  }) : React.createElement(ScrollView, {\n    pagingEnabled: false,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 5\n    }\n  }, React.createElement(View, {\n    style: {\n      marginTop: 50\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }\n  }), React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }\n  }, ticker + \" - \" + name), React.createElement(View, {\n    style: {\n      alignItems: \"center\",\n      marginTop: 30\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }\n  }, React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return on_click(1);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: selected == 1 ? {\n      color: \"red\"\n    } : {\n      color: \"black\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 11\n    }\n  }, \"1min\")), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return on_click(5);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: selected == 5 ? {\n      color: \"red\"\n    } : {\n      color: \"black\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 11\n    }\n  }, \"5min\")), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return on_click(15);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: selected == 15 ? {\n      color: \"red\"\n    } : {\n      color: \"black\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 11\n    }\n  }, \"15min\")), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return on_click(30);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: selected == 30 ? {\n      color: \"red\"\n    } : {\n      color: \"black\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 11\n    }\n  }, \"30min\")), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return on_click(60);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: selected == 60 ? {\n      color: \"red\"\n    } : {\n      color: \"black\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 11\n    }\n  }, \"60min\"))), React.createElement(Chart, {\n    slables: slables,\n    prices: prices,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }\n  }), loading2 ? React.createElement(ActivityIndicator, {\n    size: \"small\",\n    color: \"#0000ff\",\n    style: {\n      marginTop: 20\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 9\n    }\n  }) : React.createElement(View, {\n    style: {\n      alignItems: \"center\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 11\n    }\n  }, \"price - \" + price), React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 11\n    }\n  }, \"high - \" + high), React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 11\n    }\n  }, \"low - \" + low), React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 11\n    }\n  }, \"volume - \" + volume), React.createElement(Text, {\n    style: change.includes(\"-\") ? {\n      color: \"red\"\n    } : {\n      color: \"green\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 11\n    }\n  }, change)), React.createElement(Text, {\n    style: {\n      marginLeft: 20,\n      marginTop: 30\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 7\n    }\n  }, \"Latest News\"), React.createElement(View, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 7\n    }\n  }, loading3 ? React.createElement(ActivityIndicator, {\n    size: \"small\",\n    color: \"#0000ff\",\n    style: {\n      marginTop: 20\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 11\n    }\n  }) : links.map(function (x, i) {\n    return React.createElement(TouchableOpacity, {\n      key: i,\n      style: styles.card,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 15\n      }\n    }, React.createElement(Text, {\n      style: {\n        marginLeft: 7,\n        marginTop: 4\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 17\n      }\n    }, x.snippet), React.createElement(Image, {\n      source: {\n        uri: x.img\n      },\n      style: {\n        height: 200,\n        resizeMode: \"stretch\",\n        margin: 5,\n        borderRadius: 4\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 17\n      }\n    }));\n  })));\n};\n\nvar styles = StyleSheet.create({\n  card: {\n    marginTop: 12,\n    marginLeft: 20,\n    marginRight: 20,\n    backgroundColor: \"white\",\n    borderRadius: 15\n  }\n});\nexport default Stock;","map":{"version":3,"sources":["C:/Users/Het Patel/Desktop/stockappagain/Components/Stock.js"],"names":["React","useState","useEffect","av_key","Chart","Parser","require","Stock","route","navigation","params","x","ticker","name","slables","setslables","prices","setprices","price","setprice","high","sethigh","low","setlow","volume","setvolume","change","setchange","links","setlinks","loading","setloading","loading2","setloading2","loading3","setloading3","selected","setselected","get_intraday","interval","fetch","then","res","json","resJson","raw_data","processed_data","label_data","counter","obj","unshift","parseFloat","substr","get_quote","data","vals","Object","values","get_news","text","body","html","parse","arr","querySelectorAll","urls","map","url","rawAttributes","imgobj","querySelector","thumbnail","src","sample","title","link","img","snippet","on_click","marginTop","Dimensions","get","height","alignItems","color","includes","marginLeft","i","styles","card","uri","resizeMode","margin","borderRadius","StyleSheet","create","marginRight","backgroundColor"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;;;;;;;;;AAWA,SAASC,MAAT;AACA,OAAOC,KAAP;;AAEA,IAAMC,MAAM,GAAGC,OAAO,CAAC,kBAAD,CAAtB;;AAEA,IAAMC,KAAK,GAAG,SAARA,KAAQ,OAA2B;AAAA,MAAxBC,KAAwB,QAAxBA,KAAwB;AAAA,MAAjBC,UAAiB,QAAjBA,UAAiB;AAAA,wBACdD,KAAK,CAACE,MAAN,CAAaC,CADC;AAAA,MAC/BC,MAD+B,mBAC/BA,MAD+B;AAAA,MACvBC,IADuB,mBACvBA,IADuB;;AAAA,kBAGTZ,QAAQ,CAAC,CAAC,EAAD,CAAD,CAHC;AAAA;AAAA,MAGhCa,OAHgC;AAAA,MAGvBC,UAHuB;;AAAA,mBAIXd,QAAQ,CAAC,CAAC,CAAD,CAAD,CAJG;AAAA;AAAA,MAIhCe,MAJgC;AAAA,MAIxBC,SAJwB;;AAAA,mBAKbhB,QAAQ,CAAC,EAAD,CALK;AAAA;AAAA,MAKhCiB,KALgC;AAAA,MAKzBC,QALyB;;AAAA,mBAMflB,QAAQ,CAAC,EAAD,CANO;AAAA;AAAA,MAMhCmB,IANgC;AAAA,MAM1BC,OAN0B;;AAAA,mBAOjBpB,QAAQ,CAAC,EAAD,CAPS;AAAA;AAAA,MAOhCqB,GAPgC;AAAA,MAO3BC,MAP2B;;AAAA,oBAQXtB,QAAQ,CAAC,EAAD,CARG;AAAA;AAAA,MAQhCuB,MARgC;AAAA,MAQxBC,SARwB;;AAAA,oBASXxB,QAAQ,CAAC,EAAD,CATG;AAAA;AAAA,MAShCyB,MATgC;AAAA,MASxBC,SATwB;;AAAA,oBAWb1B,QAAQ,CAAC,EAAD,CAXK;AAAA;AAAA,MAWhC2B,KAXgC;AAAA,MAWzBC,QAXyB;;AAAA,oBAaT5B,QAAQ,CAAC,IAAD,CAbC;AAAA;AAAA,MAahC6B,OAbgC;AAAA,MAavBC,UAbuB;;AAAA,oBAcP9B,QAAQ,CAAC,IAAD,CAdD;AAAA;AAAA,MAchC+B,QAdgC;AAAA,MActBC,WAdsB;;AAAA,oBAePhC,QAAQ,CAAC,IAAD,CAfD;AAAA;AAAA,MAehCiC,QAfgC;AAAA,MAetBC,WAfsB;;AAAA,oBAiBPlC,QAAQ,CAAC,CAAD,CAjBD;AAAA;AAAA,MAiBhCmC,QAjBgC;AAAA,MAiBtBC,WAjBsB;;AAmBvC,MAAMC,YAAY,GAAG,SAAfA,YAAe,CAACC,QAAD,EAAc;AACjCC,IAAAA,KAAK,CACH,4EACE5B,MADF,GAEE,YAFF,GAGE2B,QAHF,GAIE,aAJF,GAKEpC,MANC,CAAL,CAQGsC,IARH,CAQQ,UAACC,GAAD;AAAA,aAASA,GAAG,CAACC,IAAJ,EAAT;AAAA,KARR,EASGF,IATH,CASQ,UAACG,OAAD,EAAa;AACjB,UAAMC,QAAQ,GAAGD,OAAO,CAAC,kBAAkBL,QAAlB,GAA6B,MAA9B,CAAxB;AACA,UAAMO,cAAc,GAAG,EAAvB;AACA,UAAMC,UAAU,GAAG,EAAnB;AACA,UAAIC,OAAO,GAAG,CAAd;;AACA,WAAK,IAAMC,GAAX,IAAkBJ,QAAlB,EAA4B;AAC1B,YAAM3B,MAAK,GAAG2B,QAAQ,CAACI,GAAD,CAAtB;AACAH,QAAAA,cAAc,CAACI,OAAf,CAAuBC,UAAU,CAACjC,MAAK,CAAC,SAAD,CAAN,CAAjC;AACA6B,QAAAA,UAAU,CAACG,OAAX,CACEF,OAAO,GAAG,EAAV,IAAgB,CAAhB,IAAqBA,OAAO,IAAI,CAAhC,GAAoCC,GAAG,CAACG,MAAJ,CAAW,CAAC,CAAZ,EAAe,CAAf,CAApC,GAAwD,EAD1D;AAGAJ,QAAAA,OAAO,IAAI,CAAX;AACD;;AACD/B,MAAAA,SAAS,CAAC6B,cAAD,CAAT;AACA/B,MAAAA,UAAU,CAACgC,UAAD,CAAV;AACAhB,MAAAA,UAAU,CAAC,KAAD,CAAV;AACD,KAzBH;AA0BD,GA3BD;;AA6BA,MAAMsB,SAAS,GAAG,SAAZA,SAAY,GAAM;AACtBb,IAAAA,KAAK,CACH,oEACE5B,MADF,GAEE,UAFF,GAGET,MAJC,CAAL,CAMGsC,IANH,CAMQ,UAACC,GAAD;AAAA,aAASA,GAAG,CAACC,IAAJ,EAAT;AAAA,KANR,EAOGF,IAPH,CAOQ,UAACG,OAAD,EAAa;AACjB,UAAMU,IAAI,GAAGV,OAAO,CAAC,cAAD,CAApB;AACA,UAAMW,IAAI,GAAGC,MAAM,CAACC,MAAP,CAAcH,IAAd,CAAb;AACAnC,MAAAA,QAAQ,CAACoC,IAAI,CAAC,CAAD,CAAL,CAAR;AACAlC,MAAAA,OAAO,CAACkC,IAAI,CAAC,CAAD,CAAL,CAAP;AACAhC,MAAAA,MAAM,CAACgC,IAAI,CAAC,CAAD,CAAL,CAAN;AACA9B,MAAAA,SAAS,CAAC8B,IAAI,CAAC,CAAD,CAAL,CAAT;AACA5B,MAAAA,SAAS,CAAC4B,IAAI,CAAC,CAAD,CAAL,CAAT;AACAtB,MAAAA,WAAW,CAAC,KAAD,CAAX;AACD,KAhBH;AAiBD,GAlBD;;AAoBA,MAAMyB,QAAQ,GAAG,SAAXA,QAAW,GAAM;AACrBlB,IAAAA,KAAK,CAAC,wCAAwC3B,IAAzC,CAAL,CACG4B,IADH,CACQ,UAACC,GAAD;AAAA,aAASA,GAAG,CAACiB,IAAJ,EAAT;AAAA,KADR,EAEGlB,IAFH,CAEQ,UAACmB,IAAD,EAAU;AACd,UAAMC,IAAI,GAAGxD,MAAM,CAACyD,KAAP,CAAaF,IAAb,CAAb;AACA,UAAMG,GAAG,GAAGF,IAAI,CAACG,gBAAL,CACV,yCADU,CAAZ;AAGA,UAAMC,IAAI,GAAGF,GAAG,CAACG,GAAJ,CAAQ,UAACvD,CAAD,EAAO;AAC1B,YAAMwD,GAAG,GAAGxD,CAAC,CAACyD,aAAF,CAAgBD,GAA5B;AACA,YAAME,MAAM,GAAG1D,CAAC,CAAC2D,aAAF,CAAgB,KAAhB,EAAuBF,aAAtC;AACA,YAAMG,SAAS,GACb,0BACC,cAAcF,MAAd,GAAuBA,MAAM,CAAC,UAAD,CAA7B,GAA4CA,MAAM,CAACG,GADpD,CADF;AAGA,YAAMC,MAAM,GAAG9D,CAAC,CAAC2D,aAAF,CAAgB,UAAhB,EAA4BF,aAA5B,CAA0CM,KAAzD;AACA,eAAO;AAAEC,UAAAA,IAAI,EAAER,GAAR;AAAaS,UAAAA,GAAG,EAAEL,SAAlB;AAA6BM,UAAAA,OAAO,EAAEJ;AAAtC,SAAP;AACD,OARY,CAAb;AASA5C,MAAAA,QAAQ,CAACoC,IAAD,CAAR;AACA9B,MAAAA,WAAW,CAAC,KAAD,CAAX;AACD,KAlBH;AAmBD,GApBD;;AAsBA,MAAM2C,QAAQ,GAAG,SAAXA,QAAW,CAAOnE,CAAP;AAAA;AAAA;AAAA;AAAA;AACf0B,YAAAA,WAAW,CAAC1B,CAAD,CAAX;AACA2B,YAAAA,YAAY,CAAC3B,CAAD,CAAZ;;AAFe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAjB;;AAKAT,EAAAA,SAAS,CAAC,YAAM;AACdoC,IAAAA,YAAY,CAAC,CAAD,CAAZ;AACAe,IAAAA,SAAS;AACTK,IAAAA,QAAQ;AACT,GAJQ,EAIN,EAJM,CAAT;AAMA,SAAO5B,OAAO,GACZ,oBAAC,iBAAD;AACE,IAAA,IAAI,EAAE,GADR;AAEE,IAAA,KAAK,EAAC,SAFR;AAGE,IAAA,KAAK,EAAE;AAAEiD,MAAAA,SAAS,EAAEC,UAAU,CAACC,GAAX,CAAe,QAAf,EAAyBC,MAAzB,GAAkC;AAA/C,KAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADY,GAOZ,oBAAC,UAAD;AAAY,IAAA,aAAa,EAAE,KAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAAEH,MAAAA,SAAS,EAAE;AAAb,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAOnE,MAAM,GAAG,KAAT,GAAiBC,IAAxB,CAFF,EAGE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAAEsE,MAAAA,UAAU,EAAE,QAAd;AAAwBJ,MAAAA,SAAS,EAAE;AAAnC,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,gBAAD;AAAkB,IAAA,OAAO,EAAE;AAAA,aAAMD,QAAQ,CAAC,CAAD,CAAd;AAAA,KAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE1C,QAAQ,IAAI,CAAZ,GAAgB;AAAEgD,MAAAA,KAAK,EAAE;AAAT,KAAhB,GAAmC;AAAEA,MAAAA,KAAK,EAAE;AAAT,KAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,CADF,EAME,oBAAC,gBAAD;AAAkB,IAAA,OAAO,EAAE;AAAA,aAAMN,QAAQ,CAAC,CAAD,CAAd;AAAA,KAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE1C,QAAQ,IAAI,CAAZ,GAAgB;AAAEgD,MAAAA,KAAK,EAAE;AAAT,KAAhB,GAAmC;AAAEA,MAAAA,KAAK,EAAE;AAAT,KAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,CANF,EAWE,oBAAC,gBAAD;AAAkB,IAAA,OAAO,EAAE;AAAA,aAAMN,QAAQ,CAAC,EAAD,CAAd;AAAA,KAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE1C,QAAQ,IAAI,EAAZ,GAAiB;AAAEgD,MAAAA,KAAK,EAAE;AAAT,KAAjB,GAAoC;AAAEA,MAAAA,KAAK,EAAE;AAAT,KAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,CAXF,EAgBE,oBAAC,gBAAD;AAAkB,IAAA,OAAO,EAAE;AAAA,aAAMN,QAAQ,CAAC,EAAD,CAAd;AAAA,KAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE1C,QAAQ,IAAI,EAAZ,GAAiB;AAAEgD,MAAAA,KAAK,EAAE;AAAT,KAAjB,GAAoC;AAAEA,MAAAA,KAAK,EAAE;AAAT,KAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,CAhBF,EAqBE,oBAAC,gBAAD;AAAkB,IAAA,OAAO,EAAE;AAAA,aAAMN,QAAQ,CAAC,EAAD,CAAd;AAAA,KAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE1C,QAAQ,IAAI,EAAZ,GAAiB;AAAEgD,MAAAA,KAAK,EAAE;AAAT,KAAjB,GAAoC;AAAEA,MAAAA,KAAK,EAAE;AAAT,KAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,CArBF,CAHF,EA+BE,oBAAC,KAAD;AAAO,IAAA,OAAO,EAAEtE,OAAhB;AAAyB,IAAA,MAAM,EAAEE,MAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA/BF,EAiCGgB,QAAQ,GACP,oBAAC,iBAAD;AACE,IAAA,IAAI,EAAC,OADP;AAEE,IAAA,KAAK,EAAC,SAFR;AAGE,IAAA,KAAK,EAAE;AAAE+C,MAAAA,SAAS,EAAE;AAAb,KAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADO,GAOP,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAAEI,MAAAA,UAAU,EAAE;AAAd,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAO,aAAajE,KAApB,CADF,EAEE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAO,YAAYE,IAAnB,CAFF,EAGE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAO,WAAWE,GAAlB,CAHF,EAIE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAO,cAAcE,MAArB,CAJF,EAKE,oBAAC,IAAD;AACE,IAAA,KAAK,EAAEE,MAAM,CAAC2D,QAAP,CAAgB,GAAhB,IAAuB;AAAED,MAAAA,KAAK,EAAE;AAAT,KAAvB,GAA0C;AAAEA,MAAAA,KAAK,EAAE;AAAT,KADnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAGG1D,MAHH,CALF,CAxCJ,EAqDE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAAE4D,MAAAA,UAAU,EAAE,EAAd;AAAkBP,MAAAA,SAAS,EAAE;AAA7B,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBArDF,EAuDE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG7C,QAAQ,GACP,oBAAC,iBAAD;AACE,IAAA,IAAI,EAAC,OADP;AAEE,IAAA,KAAK,EAAC,SAFR;AAGE,IAAA,KAAK,EAAE;AAAE6C,MAAAA,SAAS,EAAE;AAAb,KAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADO,GAOPnD,KAAK,CAACsC,GAAN,CAAU,UAACvD,CAAD,EAAI4E,CAAJ,EAAU;AAClB,WACE,oBAAC,gBAAD;AAAkB,MAAA,GAAG,EAAEA,CAAvB;AAA0B,MAAA,KAAK,EAAEC,MAAM,CAACC,IAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AAAEH,QAAAA,UAAU,EAAE,CAAd;AAAiBP,QAAAA,SAAS,EAAE;AAA5B,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA+CpE,CAAC,CAACkE,OAAjD,CADF,EAEE,oBAAC,KAAD;AACE,MAAA,MAAM,EAAE;AACNa,QAAAA,GAAG,EAAE/E,CAAC,CAACiE;AADD,OADV;AAIE,MAAA,KAAK,EAAE;AACLM,QAAAA,MAAM,EAAE,GADH;AAELS,QAAAA,UAAU,EAAE,SAFP;AAGLC,QAAAA,MAAM,EAAE,CAHH;AAILC,QAAAA,YAAY,EAAE;AAJT,OAJT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CADF;AAgBD,GAjBD,CARJ,CAvDF,CAPF;AA4FD,CAjMD;;AAmMA,IAAML,MAAM,GAAGM,UAAU,CAACC,MAAX,CAAkB;AAC/BN,EAAAA,IAAI,EAAE;AACJV,IAAAA,SAAS,EAAE,EADP;AAEJO,IAAAA,UAAU,EAAE,EAFR;AAGJU,IAAAA,WAAW,EAAE,EAHT;AAIJC,IAAAA,eAAe,EAAE,OAJb;AAKJJ,IAAAA,YAAY,EAAE;AALV;AADyB,CAAlB,CAAf;AAUA,eAAetF,KAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  View,\r\n  Text,\r\n  TouchableOpacity,\r\n  StyleSheet,\r\n  ScrollView,\r\n  Image,\r\n  ActivityIndicator,\r\n  Dimensions,\r\n} from \"react-native\";\r\nimport { av_key } from \"../config\";\r\nimport Chart from \"./Chart\";\r\n\r\nconst Parser = require(\"fast-html-parser\");\r\n\r\nconst Stock = ({ route, navigation }) => {\r\n  const { ticker, name } = route.params.x;\r\n\r\n  const [slables, setslables] = useState([\"\"]);\r\n  const [prices, setprices] = useState([0]);\r\n  const [price, setprice] = useState(\"\");\r\n  const [high, sethigh] = useState(\"\");\r\n  const [low, setlow] = useState(\"\");\r\n  const [volume, setvolume] = useState(\"\");\r\n  const [change, setchange] = useState(\"\");\r\n\r\n  const [links, setlinks] = useState([]);\r\n\r\n  const [loading, setloading] = useState(true);\r\n  const [loading2, setloading2] = useState(true);\r\n  const [loading3, setloading3] = useState(true);\r\n\r\n  const [selected, setselected] = useState(5);\r\n\r\n  const get_intraday = (interval) => {\r\n    fetch(\r\n      \"https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol=\" +\r\n        ticker +\r\n        \"&interval=\" +\r\n        interval +\r\n        \"min&apikey=\" +\r\n        av_key\r\n    )\r\n      .then((res) => res.json())\r\n      .then((resJson) => {\r\n        const raw_data = resJson[\"Time Series (\" + interval + \"min)\"];\r\n        const processed_data = [];\r\n        const label_data = [];\r\n        var counter = 1;\r\n        for (const obj in raw_data) {\r\n          const price = raw_data[obj];\r\n          processed_data.unshift(parseFloat(price[\"1. open\"]));\r\n          label_data.unshift(\r\n            counter % 20 == 0 || counter == 1 ? obj.substr(-8, 5) : \"\"\r\n          );\r\n          counter += 1;\r\n        }\r\n        setprices(processed_data);\r\n        setslables(label_data);\r\n        setloading(false);\r\n      });\r\n  };\r\n\r\n  const get_quote = () => {\r\n    fetch(\r\n      \"https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=\" +\r\n        ticker +\r\n        \"&apikey=\" +\r\n        av_key\r\n    )\r\n      .then((res) => res.json())\r\n      .then((resJson) => {\r\n        const data = resJson[\"Global Quote\"];\r\n        const vals = Object.values(data);\r\n        setprice(vals[4]);\r\n        sethigh(vals[2]);\r\n        setlow(vals[3]);\r\n        setvolume(vals[5]);\r\n        setchange(vals[9]);\r\n        setloading2(false);\r\n      });\r\n  };\r\n\r\n  const get_news = () => {\r\n    fetch(\"https://www.bing.com/news/search?q=\" + name)\r\n      .then((res) => res.text())\r\n      .then((body) => {\r\n        const html = Parser.parse(body);\r\n        const arr = html.querySelectorAll(\r\n          \".news-card.newsitem.cardcommon.b_cards2\"\r\n        );\r\n        const urls = arr.map((x) => {\r\n          const url = x.rawAttributes.url;\r\n          const imgobj = x.querySelector(\"img\").rawAttributes;\r\n          const thumbnail =\r\n            \"https://www.bing.com\" +\r\n            (\"data-src\" in imgobj ? imgobj[\"data-src\"] : imgobj.src);\r\n          const sample = x.querySelector(\".snippet\").rawAttributes.title;\r\n          return { link: url, img: thumbnail, snippet: sample };\r\n        });\r\n        setlinks(urls);\r\n        setloading3(false);\r\n      });\r\n  };\r\n\r\n  const on_click = async (x) => {\r\n    setselected(x);\r\n    get_intraday(x);\r\n  };\r\n\r\n  useEffect(() => {\r\n    get_intraday(5);\r\n    get_quote();\r\n    get_news();\r\n  }, []);\r\n\r\n  return loading ? (\r\n    <ActivityIndicator\r\n      size={100}\r\n      color=\"#0000ff\"\r\n      style={{ marginTop: Dimensions.get(\"window\").height * 0.5 }}\r\n    />\r\n  ) : (\r\n    <ScrollView pagingEnabled={false}>\r\n      <View style={{ marginTop: 50 }}></View>\r\n      <Text>{ticker + \" - \" + name}</Text>\r\n      <View style={{ alignItems: \"center\", marginTop: 30 }}>\r\n        <TouchableOpacity onPress={() => on_click(1)}>\r\n          <Text style={selected == 1 ? { color: \"red\" } : { color: \"black\" }}>\r\n            1min\r\n          </Text>\r\n        </TouchableOpacity>\r\n        <TouchableOpacity onPress={() => on_click(5)}>\r\n          <Text style={selected == 5 ? { color: \"red\" } : { color: \"black\" }}>\r\n            5min\r\n          </Text>\r\n        </TouchableOpacity>\r\n        <TouchableOpacity onPress={() => on_click(15)}>\r\n          <Text style={selected == 15 ? { color: \"red\" } : { color: \"black\" }}>\r\n            15min\r\n          </Text>\r\n        </TouchableOpacity>\r\n        <TouchableOpacity onPress={() => on_click(30)}>\r\n          <Text style={selected == 30 ? { color: \"red\" } : { color: \"black\" }}>\r\n            30min\r\n          </Text>\r\n        </TouchableOpacity>\r\n        <TouchableOpacity onPress={() => on_click(60)}>\r\n          <Text style={selected == 60 ? { color: \"red\" } : { color: \"black\" }}>\r\n            60min\r\n          </Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n\r\n      <Chart slables={slables} prices={prices}></Chart>\r\n\r\n      {loading2 ? (\r\n        <ActivityIndicator\r\n          size=\"small\"\r\n          color=\"#0000ff\"\r\n          style={{ marginTop: 20 }}\r\n        />\r\n      ) : (\r\n        <View style={{ alignItems: \"center\" }}>\r\n          <Text>{\"price - \" + price}</Text>\r\n          <Text>{\"high - \" + high}</Text>\r\n          <Text>{\"low - \" + low}</Text>\r\n          <Text>{\"volume - \" + volume}</Text>\r\n          <Text\r\n            style={change.includes(\"-\") ? { color: \"red\" } : { color: \"green\" }}\r\n          >\r\n            {change}\r\n          </Text>\r\n        </View>\r\n      )}\r\n\r\n      <Text style={{ marginLeft: 20, marginTop: 30 }}>Latest News</Text>\r\n\r\n      <View>\r\n        {loading3 ? (\r\n          <ActivityIndicator\r\n            size=\"small\"\r\n            color=\"#0000ff\"\r\n            style={{ marginTop: 20 }}\r\n          />\r\n        ) : (\r\n          links.map((x, i) => {\r\n            return (\r\n              <TouchableOpacity key={i} style={styles.card}>\r\n                <Text style={{ marginLeft: 7, marginTop: 4 }}>{x.snippet}</Text>\r\n                <Image\r\n                  source={{\r\n                    uri: x.img,\r\n                  }}\r\n                  style={{\r\n                    height: 200,\r\n                    resizeMode: \"stretch\",\r\n                    margin: 5,\r\n                    borderRadius: 4,\r\n                  }}\r\n                />\r\n              </TouchableOpacity>\r\n            );\r\n          })\r\n        )}\r\n      </View>\r\n    </ScrollView>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  card: {\r\n    marginTop: 12,\r\n    marginLeft: 20,\r\n    marginRight: 20,\r\n    backgroundColor: \"white\",\r\n    borderRadius: 15,\r\n  },\r\n});\r\n\r\nexport default Stock;\r\n"]},"metadata":{},"sourceType":"module"}