{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\Users\\\\Het Patel\\\\Desktop\\\\vscode\\\\stockappagain\\\\node_modules\\\\react-native-chart-kit\\\\src\\\\contribution-graph\\\\index.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { Svg, G, Text, Rect } from \"react-native-svg\";\nimport _ from \"lodash\";\nimport AbstractChart from \"../abstract-chart\";\nimport { DAYS_IN_WEEK, MILLISECONDS_IN_ONE_DAY, MONTH_LABELS } from \"./constants\";\nimport { shiftDate, getBeginningTimeForDate, convertToDate } from \"./dateHelpers\";\nvar SQUARE_SIZE = 20;\nvar MONTH_LABEL_GUTTER_SIZE = 8;\nvar paddingLeft = 32;\n\nfunction mapValue(x, in_min, in_max, out_min, out_max) {\n  return (x - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;\n}\n\nvar ContributionGraph = function (_AbstractChart) {\n  _inherits(ContributionGraph, _AbstractChart);\n\n  var _super = _createSuper(ContributionGraph);\n\n  function ContributionGraph(props) {\n    var _this;\n\n    _classCallCheck(this, ContributionGraph);\n\n    _this = _super.call(this, props);\n\n    var _this$getValueCache = _this.getValueCache(props.values),\n        maxValue = _this$getValueCache.maxValue,\n        minValue = _this$getValueCache.minValue,\n        valueCache = _this$getValueCache.valueCache;\n\n    _this.state = {\n      maxValue: maxValue,\n      minValue: minValue,\n      valueCache: valueCache\n    };\n    return _this;\n  }\n\n  _createClass(ContributionGraph, [{\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(nextProps) {\n      var _this$getValueCache2 = this.getValueCache(nextProps.values),\n          maxValue = _this$getValueCache2.maxValue,\n          minValue = _this$getValueCache2.minValue,\n          valueCache = _this$getValueCache2.valueCache;\n\n      this.setState({\n        maxValue: maxValue,\n        minValue: minValue,\n        valueCache: valueCache\n      });\n    }\n  }, {\n    key: \"getSquareSizeWithGutter\",\n    value: function getSquareSizeWithGutter() {\n      return (this.props.squareSize || SQUARE_SIZE) + this.props.gutterSize;\n    }\n  }, {\n    key: \"getMonthLabelSize\",\n    value: function getMonthLabelSize() {\n      var _this$props$squareSiz = this.props.squareSize,\n          squareSize = _this$props$squareSiz === void 0 ? SQUARE_SIZE : _this$props$squareSiz;\n\n      if (!this.props.showMonthLabels) {\n        return 0;\n      }\n\n      if (this.props.horizontal) {\n        return squareSize + MONTH_LABEL_GUTTER_SIZE;\n      }\n\n      return 2 * (squareSize + MONTH_LABEL_GUTTER_SIZE);\n    }\n  }, {\n    key: \"getStartDate\",\n    value: function getStartDate() {\n      return shiftDate(this.getEndDate(), -this.props.numDays + 1);\n    }\n  }, {\n    key: \"getEndDate\",\n    value: function getEndDate() {\n      return getBeginningTimeForDate(convertToDate(this.props.endDate));\n    }\n  }, {\n    key: \"getStartDateWithEmptyDays\",\n    value: function getStartDateWithEmptyDays() {\n      return shiftDate(this.getStartDate(), -this.getNumEmptyDaysAtStart());\n    }\n  }, {\n    key: \"getNumEmptyDaysAtStart\",\n    value: function getNumEmptyDaysAtStart() {\n      return this.getStartDate().getDay();\n    }\n  }, {\n    key: \"getNumEmptyDaysAtEnd\",\n    value: function getNumEmptyDaysAtEnd() {\n      return DAYS_IN_WEEK - 1 - this.getEndDate().getDay();\n    }\n  }, {\n    key: \"getWeekCount\",\n    value: function getWeekCount() {\n      var numDaysRoundedToWeek = this.props.numDays + this.getNumEmptyDaysAtStart() + this.getNumEmptyDaysAtEnd();\n      return Math.ceil(numDaysRoundedToWeek / DAYS_IN_WEEK);\n    }\n  }, {\n    key: \"getWeekWidth\",\n    value: function getWeekWidth() {\n      return DAYS_IN_WEEK * this.getSquareSizeWithGutter();\n    }\n  }, {\n    key: \"getWidth\",\n    value: function getWidth() {\n      return this.getWeekCount() * this.getSquareSizeWithGutter() - this.props.gutterSize;\n    }\n  }, {\n    key: \"getHeight\",\n    value: function getHeight() {\n      return this.getWeekWidth() + (this.getMonthLabelSize() - this.props.gutterSize);\n    }\n  }, {\n    key: \"getValueCache\",\n    value: function getValueCache(values) {\n      var _this2 = this;\n\n      var minValue = Infinity,\n          maxValue = -Infinity;\n      return {\n        valueCache: values.reduce(function (memo, value) {\n          var date = convertToDate(value.date);\n          var index = Math.floor((date - _this2.getStartDateWithEmptyDays()) / MILLISECONDS_IN_ONE_DAY);\n          minValue = Math.min(value[_this2.props.accessor], minValue);\n          maxValue = Math.max(value[_this2.props.accessor], maxValue);\n          memo[index] = {\n            value: value,\n            title: _this2.props.titleForValue ? _this2.props.titleForValue(value) : null,\n            tooltipDataAttrs: _this2.getTooltipDataAttrsForValue(value)\n          };\n          return memo;\n        }, {}),\n        minValue: minValue,\n        maxValue: maxValue\n      };\n    }\n  }, {\n    key: \"getValueForIndex\",\n    value: function getValueForIndex(index) {\n      if (this.state.valueCache[index]) {\n        return this.state.valueCache[index].value;\n      }\n\n      return null;\n    }\n  }, {\n    key: \"getClassNameForIndex\",\n    value: function getClassNameForIndex(index) {\n      if (this.state.valueCache[index]) {\n        if (this.state.valueCache[index].value) {\n          var count = this.state.valueCache[index].value[this.props.accessor];\n\n          if (count) {\n            var opacity = mapValue(count, this.state.minValue, this.state.maxValue, 0.15 + 0.05, 1);\n            return this.props.chartConfig.color(opacity);\n          }\n        }\n      }\n\n      return this.props.chartConfig.color(0.15);\n    }\n  }, {\n    key: \"getTitleForIndex\",\n    value: function getTitleForIndex(index) {\n      if (this.state.valueCache[index]) {\n        return this.state.valueCache[index].title;\n      }\n\n      return this.props.titleForValue ? this.props.titleForValue(null) : null;\n    }\n  }, {\n    key: \"getTooltipDataAttrsForIndex\",\n    value: function getTooltipDataAttrsForIndex(index) {\n      if (this.state.valueCache[index]) {\n        return this.state.valueCache[index].tooltipDataAttrs;\n      }\n\n      return this.getTooltipDataAttrsForValue(_defineProperty({\n        date: null\n      }, this.props.accessor, null));\n    }\n  }, {\n    key: \"getTooltipDataAttrsForValue\",\n    value: function getTooltipDataAttrsForValue(value) {\n      var tooltipDataAttrs = this.props.tooltipDataAttrs;\n\n      if (typeof tooltipDataAttrs === \"function\") {\n        return tooltipDataAttrs(value);\n      }\n\n      return tooltipDataAttrs;\n    }\n  }, {\n    key: \"getTransformForWeek\",\n    value: function getTransformForWeek(weekIndex) {\n      if (this.props.horizontal) {\n        return [weekIndex * this.getSquareSizeWithGutter(), 50];\n      }\n\n      return [10, weekIndex * this.getSquareSizeWithGutter()];\n    }\n  }, {\n    key: \"getTransformForMonthLabels\",\n    value: function getTransformForMonthLabels() {\n      if (this.props.horizontal) {\n        return null;\n      }\n\n      return this.getWeekWidth() + MONTH_LABEL_GUTTER_SIZE + \", 0\";\n    }\n  }, {\n    key: \"getTransformForAllWeeks\",\n    value: function getTransformForAllWeeks() {\n      if (this.props.horizontal) {\n        return \"0, \" + (this.getMonthLabelSize() - 100);\n      }\n\n      return null;\n    }\n  }, {\n    key: \"getViewBox\",\n    value: function getViewBox() {\n      if (this.props.horizontal) {\n        return this.getWidth() + \" \" + this.getHeight();\n      }\n\n      return this.getHeight() + \" \" + this.getWidth();\n    }\n  }, {\n    key: \"getSquareCoordinates\",\n    value: function getSquareCoordinates(dayIndex) {\n      if (this.props.horizontal) {\n        return [0, dayIndex * this.getSquareSizeWithGutter()];\n      }\n\n      return [dayIndex * this.getSquareSizeWithGutter(), 0];\n    }\n  }, {\n    key: \"getMonthLabelCoordinates\",\n    value: function getMonthLabelCoordinates(weekIndex) {\n      if (this.props.horizontal) {\n        return [weekIndex * this.getSquareSizeWithGutter(), this.getMonthLabelSize() - MONTH_LABEL_GUTTER_SIZE];\n      }\n\n      var verticalOffset = -2;\n      return [0, (weekIndex + 1) * this.getSquareSizeWithGutter() + verticalOffset];\n    }\n  }, {\n    key: \"renderSquare\",\n    value: function renderSquare(dayIndex, index) {\n      var _this3 = this;\n\n      var indexOutOfRange = index < this.getNumEmptyDaysAtStart() || index >= this.getNumEmptyDaysAtStart() + this.props.numDays;\n\n      if (indexOutOfRange && !this.props.showOutOfRangeDays) {\n        return null;\n      }\n\n      var _this$getSquareCoordi = this.getSquareCoordinates(dayIndex),\n          _this$getSquareCoordi2 = _slicedToArray(_this$getSquareCoordi, 2),\n          x = _this$getSquareCoordi2[0],\n          y = _this$getSquareCoordi2[1];\n\n      var _this$props$squareSiz2 = this.props.squareSize,\n          squareSize = _this$props$squareSiz2 === void 0 ? SQUARE_SIZE : _this$props$squareSiz2;\n      return React.createElement(Rect, _extends({\n        key: index,\n        width: squareSize,\n        height: squareSize,\n        x: x + paddingLeft,\n        y: y,\n        title: this.getTitleForIndex(index),\n        fill: this.getClassNameForIndex(index),\n        onPress: function onPress() {\n          _this3.handleDayPress(index);\n        }\n      }, this.getTooltipDataAttrsForIndex(index), {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 7\n        }\n      }));\n    }\n  }, {\n    key: \"handleDayPress\",\n    value: function handleDayPress(index) {\n      var _ref;\n\n      if (!this.props.onDayPress) {\n        return;\n      }\n\n      this.props.onDayPress(this.state.valueCache[index] && this.state.valueCache[index].value ? this.state.valueCache[index].value : (_ref = {}, _defineProperty(_ref, this.props.accessor, 0), _defineProperty(_ref, \"date\", new Date(this.getStartDate().valueOf() + index * MILLISECONDS_IN_ONE_DAY)), _ref));\n    }\n  }, {\n    key: \"renderWeek\",\n    value: function renderWeek(weekIndex) {\n      var _this4 = this;\n\n      var _this$getTransformFor = this.getTransformForWeek(weekIndex),\n          _this$getTransformFor2 = _slicedToArray(_this$getTransformFor, 2),\n          x = _this$getTransformFor2[0],\n          y = _this$getTransformFor2[1];\n\n      return React.createElement(G, {\n        key: weekIndex,\n        x: x,\n        y: y,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 7\n        }\n      }, _.range(DAYS_IN_WEEK).map(function (dayIndex) {\n        return _this4.renderSquare(dayIndex, weekIndex * DAYS_IN_WEEK + dayIndex);\n      }));\n    }\n  }, {\n    key: \"renderAllWeeks\",\n    value: function renderAllWeeks() {\n      var _this5 = this;\n\n      return _.range(this.getWeekCount()).map(function (weekIndex) {\n        return _this5.renderWeek(weekIndex);\n      });\n    }\n  }, {\n    key: \"renderMonthLabels\",\n    value: function renderMonthLabels() {\n      var _this6 = this;\n\n      if (!this.props.showMonthLabels) {\n        return null;\n      }\n\n      var weekRange = _.range(this.getWeekCount() - 1);\n\n      return weekRange.map(function (weekIndex) {\n        var endOfWeek = shiftDate(_this6.getStartDateWithEmptyDays(), (weekIndex + 1) * DAYS_IN_WEEK);\n\n        var _this6$getMonthLabelC = _this6.getMonthLabelCoordinates(weekIndex),\n            _this6$getMonthLabelC2 = _slicedToArray(_this6$getMonthLabelC, 2),\n            x = _this6$getMonthLabelC2[0],\n            y = _this6$getMonthLabelC2[1];\n\n        return endOfWeek.getDate() >= 1 && endOfWeek.getDate() <= DAYS_IN_WEEK ? React.createElement(Text, _extends({\n          key: weekIndex,\n          x: x + paddingLeft,\n          y: y + 8\n        }, _this6.getPropsForLabels(), {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 9\n          }\n        }), _this6.props.getMonthLabel ? _this6.props.getMonthLabel(endOfWeek.getMonth()) : MONTH_LABELS[endOfWeek.getMonth()]) : null;\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props$style = this.props.style,\n          style = _this$props$style === void 0 ? {} : _this$props$style;\n      var _style$borderRadius = style.borderRadius,\n          borderRadius = _style$borderRadius === void 0 ? 0 : _style$borderRadius;\n\n      if (!borderRadius && this.props.chartConfig.style) {\n        var stupidXo = this.props.chartConfig.style.borderRadius;\n        borderRadius = stupidXo;\n      }\n\n      return React.createElement(View, {\n        style: style,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 7\n        }\n      }, React.createElement(Svg, {\n        height: this.props.height,\n        width: this.props.width,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 9\n        }\n      }, this.renderDefs(_objectSpread({\n        width: this.props.width,\n        height: this.props.height\n      }, this.props.chartConfig)), React.createElement(Rect, {\n        width: \"100%\",\n        height: this.props.height,\n        rx: borderRadius,\n        ry: borderRadius,\n        fill: \"url(#backgroundGradient)\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 11\n        }\n      }), React.createElement(G, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 11\n        }\n      }, this.renderMonthLabels()), React.createElement(G, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 11\n        }\n      }, this.renderAllWeeks())));\n    }\n  }]);\n\n  return ContributionGraph;\n}(AbstractChart);\n\nContributionGraph.defaultProps = {\n  numDays: 200,\n  endDate: new Date(),\n  gutterSize: 1,\n  squareSize: SQUARE_SIZE,\n  horizontal: true,\n  showMonthLabels: true,\n  showOutOfRangeDays: false,\n  accessor: \"count\",\n  classForValue: function classForValue(value) {\n    return value ? \"black\" : \"#8cc665\";\n  }\n};\nexport default ContributionGraph;","map":{"version":3,"sources":["C:/Users/Het Patel/Desktop/vscode/stockappagain/node_modules/react-native-chart-kit/src/contribution-graph/index.js"],"names":["React","Svg","G","Text","Rect","_","AbstractChart","DAYS_IN_WEEK","MILLISECONDS_IN_ONE_DAY","MONTH_LABELS","shiftDate","getBeginningTimeForDate","convertToDate","SQUARE_SIZE","MONTH_LABEL_GUTTER_SIZE","paddingLeft","mapValue","x","in_min","in_max","out_min","out_max","ContributionGraph","props","getValueCache","values","maxValue","minValue","valueCache","state","nextProps","setState","squareSize","gutterSize","showMonthLabels","horizontal","getEndDate","numDays","endDate","getStartDate","getNumEmptyDaysAtStart","getDay","numDaysRoundedToWeek","getNumEmptyDaysAtEnd","Math","ceil","getSquareSizeWithGutter","getWeekCount","getWeekWidth","getMonthLabelSize","Infinity","reduce","memo","value","date","index","floor","getStartDateWithEmptyDays","min","accessor","max","title","titleForValue","tooltipDataAttrs","getTooltipDataAttrsForValue","count","opacity","chartConfig","color","weekIndex","getWidth","getHeight","dayIndex","verticalOffset","indexOutOfRange","showOutOfRangeDays","getSquareCoordinates","y","getTitleForIndex","getClassNameForIndex","handleDayPress","getTooltipDataAttrsForIndex","onDayPress","Date","valueOf","getTransformForWeek","range","map","renderSquare","renderWeek","weekRange","endOfWeek","getMonthLabelCoordinates","getDate","getPropsForLabels","getMonthLabel","getMonth","style","borderRadius","stupidXo","height","width","renderDefs","renderMonthLabels","renderAllWeeks","defaultProps","classForValue"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { View } from \"react-native\";\nimport { Svg, G, Text, Rect } from \"react-native-svg\";\nimport _ from \"lodash\";\nimport AbstractChart from \"../abstract-chart\";\nimport {\n  DAYS_IN_WEEK,\n  MILLISECONDS_IN_ONE_DAY,\n  MONTH_LABELS\n} from \"./constants\";\nimport {\n  shiftDate,\n  getBeginningTimeForDate,\n  convertToDate\n} from \"./dateHelpers\";\n\nconst SQUARE_SIZE = 20;\nconst MONTH_LABEL_GUTTER_SIZE = 8;\nconst paddingLeft = 32;\n\nfunction mapValue(x, in_min, in_max, out_min, out_max) {\n  return ((x - in_min) * (out_max - out_min)) / (in_max - in_min) + out_min;\n}\n\nclass ContributionGraph extends AbstractChart {\n  constructor(props) {\n    super(props);\n\n    let { maxValue, minValue, valueCache } = this.getValueCache(props.values);\n\n    this.state = {\n      maxValue,\n      minValue,\n      valueCache\n    };\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    let { maxValue, minValue, valueCache } = this.getValueCache(\n      nextProps.values\n    );\n\n    this.setState({\n      maxValue,\n      minValue,\n      valueCache\n    });\n  }\n\n  getSquareSizeWithGutter() {\n    return (this.props.squareSize || SQUARE_SIZE) + this.props.gutterSize;\n  }\n\n  getMonthLabelSize() {\n    let { squareSize = SQUARE_SIZE } = this.props;\n    if (!this.props.showMonthLabels) {\n      return 0;\n    }\n    if (this.props.horizontal) {\n      return squareSize + MONTH_LABEL_GUTTER_SIZE;\n    }\n    return 2 * (squareSize + MONTH_LABEL_GUTTER_SIZE);\n  }\n\n  getStartDate() {\n    return shiftDate(this.getEndDate(), -this.props.numDays + 1); // +1 because endDate is inclusive\n  }\n\n  getEndDate() {\n    return getBeginningTimeForDate(convertToDate(this.props.endDate));\n  }\n\n  getStartDateWithEmptyDays() {\n    return shiftDate(this.getStartDate(), -this.getNumEmptyDaysAtStart());\n  }\n\n  getNumEmptyDaysAtStart() {\n    return this.getStartDate().getDay();\n  }\n\n  getNumEmptyDaysAtEnd() {\n    return DAYS_IN_WEEK - 1 - this.getEndDate().getDay();\n  }\n\n  getWeekCount() {\n    const numDaysRoundedToWeek =\n      this.props.numDays +\n      this.getNumEmptyDaysAtStart() +\n      this.getNumEmptyDaysAtEnd();\n    return Math.ceil(numDaysRoundedToWeek / DAYS_IN_WEEK);\n  }\n\n  getWeekWidth() {\n    return DAYS_IN_WEEK * this.getSquareSizeWithGutter();\n  }\n\n  getWidth() {\n    return (\n      this.getWeekCount() * this.getSquareSizeWithGutter() -\n      this.props.gutterSize\n    );\n  }\n\n  getHeight() {\n    return (\n      this.getWeekWidth() + (this.getMonthLabelSize() - this.props.gutterSize)\n    );\n  }\n\n  getValueCache(values) {\n    let minValue = Infinity,\n      maxValue = -Infinity;\n\n    return {\n      valueCache: values.reduce((memo, value) => {\n        const date = convertToDate(value.date);\n        const index = Math.floor(\n          (date - this.getStartDateWithEmptyDays()) / MILLISECONDS_IN_ONE_DAY\n        );\n\n        minValue = Math.min(value[this.props.accessor], minValue);\n        maxValue = Math.max(value[this.props.accessor], maxValue);\n\n        memo[index] = {\n          value,\n          title: this.props.titleForValue\n            ? this.props.titleForValue(value)\n            : null,\n          tooltipDataAttrs: this.getTooltipDataAttrsForValue(value)\n        };\n        return memo;\n      }, {}),\n      minValue,\n      maxValue\n    };\n  }\n\n  getValueForIndex(index) {\n    if (this.state.valueCache[index]) {\n      return this.state.valueCache[index].value;\n    }\n    return null;\n  }\n\n  getClassNameForIndex(index) {\n    if (this.state.valueCache[index]) {\n      if (this.state.valueCache[index].value) {\n        const count = this.state.valueCache[index].value[this.props.accessor];\n\n        if (count) {\n          const opacity = mapValue(\n            count,\n            this.state.minValue,\n            this.state.maxValue,\n            0.15 + 0.05, // + 0.05 to make smaller values a bit more visible\n            1\n          );\n\n          return this.props.chartConfig.color(opacity);\n        }\n      }\n    }\n\n    return this.props.chartConfig.color(0.15);\n  }\n\n  getTitleForIndex(index) {\n    if (this.state.valueCache[index]) {\n      return this.state.valueCache[index].title;\n    }\n    return this.props.titleForValue ? this.props.titleForValue(null) : null;\n  }\n\n  getTooltipDataAttrsForIndex(index) {\n    if (this.state.valueCache[index]) {\n      return this.state.valueCache[index].tooltipDataAttrs;\n    }\n    return this.getTooltipDataAttrsForValue({ date: null, [this.props.accessor]: null });\n  }\n\n  getTooltipDataAttrsForValue(value) {\n    const { tooltipDataAttrs } = this.props;\n\n    if (typeof tooltipDataAttrs === \"function\") {\n      return tooltipDataAttrs(value);\n    }\n    return tooltipDataAttrs;\n  }\n\n  getTransformForWeek(weekIndex) {\n    if (this.props.horizontal) {\n      return [weekIndex * this.getSquareSizeWithGutter(), 50];\n    }\n    return [10, weekIndex * this.getSquareSizeWithGutter()];\n  }\n\n  getTransformForMonthLabels() {\n    if (this.props.horizontal) {\n      return null;\n    }\n    return `${this.getWeekWidth() + MONTH_LABEL_GUTTER_SIZE}, 0`;\n  }\n\n  getTransformForAllWeeks() {\n    if (this.props.horizontal) {\n      return `0, ${this.getMonthLabelSize() - 100}`;\n    }\n    return null;\n  }\n\n  getViewBox() {\n    if (this.props.horizontal) {\n      return `${this.getWidth()} ${this.getHeight()}`;\n    }\n    return `${this.getHeight()} ${this.getWidth()}`;\n  }\n\n  getSquareCoordinates(dayIndex) {\n    if (this.props.horizontal) {\n      return [0, dayIndex * this.getSquareSizeWithGutter()];\n    }\n    return [dayIndex * this.getSquareSizeWithGutter(), 0];\n  }\n\n  getMonthLabelCoordinates(weekIndex) {\n    if (this.props.horizontal) {\n      return [\n        weekIndex * this.getSquareSizeWithGutter(),\n        this.getMonthLabelSize() - MONTH_LABEL_GUTTER_SIZE\n      ];\n    }\n    const verticalOffset = -2;\n    return [\n      0,\n      (weekIndex + 1) * this.getSquareSizeWithGutter() + verticalOffset\n    ];\n  }\n\n  renderSquare(dayIndex, index) {\n    const indexOutOfRange =\n      index < this.getNumEmptyDaysAtStart() ||\n      index >= this.getNumEmptyDaysAtStart() + this.props.numDays;\n\n    if (indexOutOfRange && !this.props.showOutOfRangeDays) {\n      return null;\n    }\n\n    const [x, y] = this.getSquareCoordinates(dayIndex);\n    const { squareSize = SQUARE_SIZE } = this.props;\n\n    return (\n      <Rect\n        key={index}\n        width={squareSize}\n        height={squareSize}\n        x={x + paddingLeft}\n        y={y}\n        title={this.getTitleForIndex(index)}\n        fill={this.getClassNameForIndex(index)}\n        onPress={() => {\n          this.handleDayPress(index);\n        }}\n        {...this.getTooltipDataAttrsForIndex(index)}\n      />\n    );\n  }\n\n  handleDayPress(index) {\n    if (!this.props.onDayPress) {\n      return;\n    }\n    this.props.onDayPress(\n      this.state.valueCache[index] && this.state.valueCache[index].value\n        ? this.state.valueCache[index].value\n        : {\n            [this.props.accessor]: 0,\n            date: new Date(\n              this.getStartDate().valueOf() + index * MILLISECONDS_IN_ONE_DAY\n            )\n          }\n    );\n  }\n\n  renderWeek(weekIndex) {\n    const [x, y] = this.getTransformForWeek(weekIndex);\n    return (\n      <G key={weekIndex} x={x} y={y}>\n        {_.range(DAYS_IN_WEEK).map(dayIndex =>\n          this.renderSquare(dayIndex, weekIndex * DAYS_IN_WEEK + dayIndex)\n        )}\n      </G>\n    );\n  }\n\n  renderAllWeeks() {\n    return _.range(this.getWeekCount()).map(weekIndex =>\n      this.renderWeek(weekIndex)\n    );\n  }\n\n  renderMonthLabels() {\n    if (!this.props.showMonthLabels) {\n      return null;\n    }\n    const weekRange = _.range(this.getWeekCount() - 1); // don't render for last week, because label will be cut off\n    return weekRange.map(weekIndex => {\n      const endOfWeek = shiftDate(\n        this.getStartDateWithEmptyDays(),\n        (weekIndex + 1) * DAYS_IN_WEEK\n      );\n      const [x, y] = this.getMonthLabelCoordinates(weekIndex);\n      return endOfWeek.getDate() >= 1 && endOfWeek.getDate() <= DAYS_IN_WEEK ? (\n        <Text\n          key={weekIndex}\n          x={x + paddingLeft}\n          y={y + 8}\n          {...this.getPropsForLabels()}\n        >\n          {this.props.getMonthLabel\n            ? this.props.getMonthLabel(endOfWeek.getMonth())\n            : MONTH_LABELS[endOfWeek.getMonth()]}\n        </Text>\n      ) : null;\n    });\n  }\n\n  render() {\n    const { style = {} } = this.props;\n    let { borderRadius = 0 } = style;\n    if (!borderRadius && this.props.chartConfig.style) {\n      const stupidXo = this.props.chartConfig.style.borderRadius;\n      borderRadius = stupidXo;\n    }\n    return (\n      <View style={style}>\n        <Svg height={this.props.height} width={this.props.width}>\n          {this.renderDefs({\n            width: this.props.width,\n            height: this.props.height,\n            ...this.props.chartConfig\n          })}\n          <Rect\n            width=\"100%\"\n            height={this.props.height}\n            rx={borderRadius}\n            ry={borderRadius}\n            fill=\"url(#backgroundGradient)\"\n          />\n          <G>{this.renderMonthLabels()}</G>\n          <G>{this.renderAllWeeks()}</G>\n        </Svg>\n      </View>\n    );\n  }\n}\n\nContributionGraph.defaultProps = {\n  numDays: 200,\n  endDate: new Date(),\n  gutterSize: 1,\n  squareSize: SQUARE_SIZE,\n  horizontal: true,\n  showMonthLabels: true,\n  showOutOfRangeDays: false,\n  accessor: \"count\",\n  classForValue: value => (value ? \"black\" : \"#8cc665\")\n};\n\nexport default ContributionGraph;\n"]},"metadata":{},"sourceType":"module"}