{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/adarsh/Documents/StocksUI/Components/Feed.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ArticleLink from \"../Components/ArticleLink\";\n\nvar Parser = require(\"fast-html-parser\");\n\nvar Feed = function Feed(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      gainers = _useState2[0],\n      setgainers = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      losers = _useState4[0],\n      setlosers = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      actives = _useState6[0],\n      setactives = _useState6[1];\n\n  var mappings = {\n    \"gainers \": setgainers,\n    \"losers \": setlosers,\n    \"most-active \": setactives\n  };\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      current = _useState8[0],\n      setcurrent = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      links = _useState10[0],\n      setlinks = _useState10[1];\n\n  var get_yahoo = function get_yahoo(category) {\n    fetch(\"https://finance.yahoo.com/\" + category).then(function (res) {\n      return res.text();\n    }).then(function (body) {\n      var html = Parser.parse(body);\n      var table = html.querySelector(\"#scr-res-table\").querySelectorAll(\"tr\").slice(1);\n      var arr = [];\n      table.forEach(function (x) {\n        var data = x.querySelectorAll(\"td\");\n        var t = data[0].querySelector(\"a\").text;\n        var n = data[0].querySelector(\"a\").rawAttributes.title;\n        var p = data[2].querySelector(\"span\").text;\n        var vc = data[3].querySelector(\"span\").text;\n        var pc = data[4].querySelector(\"span\").text;\n        var v = data[5].querySelector(\"span\").text;\n        arr.push({\n          ticker: t,\n          name: n,\n          price: p,\n          vchange: vc,\n          pchange: pc,\n          volume: v\n        });\n        var setter = mappings[category + \" \"];\n        setter(arr);\n      });\n    });\n  };\n\n  var get_gainers = function get_gainers() {\n    return get_yahoo(\"gainers\");\n  };\n\n  var get_losers = function get_losers() {\n    return get_yahoo(\"losers\");\n  };\n\n  var get_most_actives = function get_most_actives() {\n    return get_yahoo(\"most-active\");\n  };\n\n  var get_news = function get_news(query) {\n    fetch(\"https://www.bing.com/news/search?q=\" + query).then(function (res) {\n      return res.text();\n    }).then(function (body) {\n      var html = Parser.parse(body);\n      var arr = html.querySelectorAll(\".news-card.newsitem.cardcommon.b_cards2\");\n      var urls = arr.map(function (x) {\n        var url = x.rawAttributes.url;\n        var imgobj = x.querySelector(\"img\").rawAttributes;\n        var thumbnail = \"https://www.bing.com\" + (\"data-src\" in imgobj ? imgobj[\"data-src\"] : imgobj.src);\n        var sample = x.querySelector(\".snippet\").rawAttributes.title;\n        return {\n          link: url,\n          img: thumbnail,\n          snippet: sample\n        };\n      });\n      setlinks(urls);\n    });\n  };\n\n  useEffect(function () {\n    get_gainers();\n    get_losers();\n    get_most_actives();\n    get_news(\"finance\");\n    setTimeout(function () {\n      return setcurrent(actives);\n    }, 3000);\n  }, []);\n  return React.createElement(ScrollView, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 5\n    }\n  }, React.createElement(View, {\n    style: {\n      flexDirection: \"row\",\n      justifyContent: \"center\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }\n  }, React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return setcurrent(gainers);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: {\n      margin: 10\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 11\n    }\n  }, \"Gainers\")), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return setcurrent(actives);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: {\n      margin: 10\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 11\n    }\n  }, \"Most-Active\")), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return setcurrent(losers);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: {\n      margin: 10\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 11\n    }\n  }, \"Losers\"))), React.createElement(View, {\n    style: styles.stock,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: {\n      width: \"30%\",\n      marginLeft: 20\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }\n  }, \"Ticker\"), React.createElement(Text, {\n    style: {\n      width: \"23%\",\n      textAlign: \"right\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 9\n    }\n  }, \"Price\"), React.createElement(Text, {\n    style: {\n      width: \"23%\",\n      textAlign: \"right\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }\n  }, \"24h\"), React.createElement(Text, {\n    style: {\n      width: \"23%\",\n      textAlign: \"right\",\n      marginRight: 20\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }\n  }, \"Volume\")), current.map(function (x, i) {\n    return React.createElement(TouchableOpacity, {\n      key: i,\n      onPress: function onPress() {\n        return navigation.navigate(\"stock\", {\n          x: x\n        });\n      },\n      style: styles.stock,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }\n    }, React.createElement(Text, {\n      style: {\n        width: \"30%\",\n        marginLeft: 20,\n        color: \"#474747\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 11\n      }\n    }, x.ticker), React.createElement(Text, {\n      style: {\n        width: \"23%\",\n        textAlign: \"right\",\n        color: \"#474747\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 11\n      }\n    }, x.price), React.createElement(Text, {\n      style: _objectSpread(_objectSpread({}, {\n        width: \"23%\",\n        textAlign: \"right\",\n        color: \"#474747\"\n      }), x.pchange.includes(\"+\") ? {\n        color: \"green\"\n      } : {\n        color: \"red\"\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 11\n      }\n    }, x.pchange), React.createElement(Text, {\n      style: {\n        width: \"23%\",\n        textAlign: \"right\",\n        marginRight: 20,\n        color: \"#474747\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 11\n      }\n    }, x.volume));\n  }), React.createElement(Text, {\n    style: {\n      marginLeft: 20,\n      marginTop: 30\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }\n  }, \"Latest News\"), links.map(function (x, i) {\n    return React.createElement(ArticleLink, {\n      x: x,\n      key: i,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 16\n      }\n    });\n  }));\n};\n\nvar styles = StyleSheet.create({\n  stock: {\n    borderWidth: StyleSheet.hairlineWidth,\n    flexDirection: \"row\",\n    justifyContent: \"center\",\n    backgroundColor: \"white\",\n    borderTopWidth: 0,\n    borderColor: \"#ededed\"\n  }\n});\nexport default Feed;","map":{"version":3,"sources":["/Users/adarsh/Documents/StocksUI/Components/Feed.js"],"names":["React","useState","useEffect","ArticleLink","Parser","require","Feed","navigation","gainers","setgainers","losers","setlosers","actives","setactives","mappings","current","setcurrent","links","setlinks","get_yahoo","category","fetch","then","res","text","body","html","parse","table","querySelector","querySelectorAll","slice","arr","forEach","x","data","t","n","rawAttributes","title","p","vc","pc","v","push","ticker","name","price","vchange","pchange","volume","setter","get_gainers","get_losers","get_most_actives","get_news","query","urls","map","url","imgobj","thumbnail","src","sample","link","img","snippet","setTimeout","flexDirection","justifyContent","margin","styles","stock","width","marginLeft","textAlign","marginRight","i","navigate","color","includes","marginTop","StyleSheet","create","borderWidth","hairlineWidth","backgroundColor","borderTopWidth","borderColor"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n  View,\n  Text,\n  TouchableOpacity,\n  ScrollView,\n  StyleSheet,\n} from \"react-native\";\nimport ArticleLink from \"../Components/ArticleLink\";\n\nconst Parser = require(\"fast-html-parser\");\n\nconst Feed = ({ navigation }) => {\n  const [gainers, setgainers] = useState([]);\n  const [losers, setlosers] = useState([]);\n  const [actives, setactives] = useState([]);\n  const mappings = {\n    \"gainers \": setgainers,\n    \"losers \": setlosers,\n    \"most-active \": setactives,\n  };\n\n  const [current, setcurrent] = useState([]);\n  const [links, setlinks] = useState([]);\n\n  const get_yahoo = (category) => {\n    fetch(\"https://finance.yahoo.com/\" + category)\n      .then((res) => res.text())\n      .then((body) => {\n        const html = Parser.parse(body);\n        const table = html\n          .querySelector(\"#scr-res-table\")\n          .querySelectorAll(\"tr\")\n          .slice(1);\n\n        const arr = [];\n\n        table.forEach((x) => {\n          const data = x.querySelectorAll(\"td\");\n          const t = data[0].querySelector(\"a\").text;\n          const n = data[0].querySelector(\"a\").rawAttributes.title;\n          const p = data[2].querySelector(\"span\").text;\n          const vc = data[3].querySelector(\"span\").text;\n          const pc = data[4].querySelector(\"span\").text;\n          const v = data[5].querySelector(\"span\").text;\n\n          arr.push({\n            ticker: t,\n            name: n,\n            price: p,\n            vchange: vc,\n            pchange: pc,\n            volume: v,\n          });\n\n          const setter = mappings[category + \" \"];\n          setter(arr);\n        });\n      });\n  };\n\n  const get_gainers = () => get_yahoo(\"gainers\");\n  const get_losers = () => get_yahoo(\"losers\");\n  const get_most_actives = () => get_yahoo(\"most-active\");\n\n  const get_news = (query) => {\n    fetch(\"https://www.bing.com/news/search?q=\" + query)\n      .then((res) => res.text())\n      .then((body) => {\n        const html = Parser.parse(body);\n        const arr = html.querySelectorAll(\n          \".news-card.newsitem.cardcommon.b_cards2\"\n        );\n        const urls = arr.map((x) => {\n          const url = x.rawAttributes.url;\n          const imgobj = x.querySelector(\"img\").rawAttributes;\n          const thumbnail =\n            \"https://www.bing.com\" +\n            (\"data-src\" in imgobj ? imgobj[\"data-src\"] : imgobj.src);\n          const sample = x.querySelector(\".snippet\").rawAttributes.title;\n          return { link: url, img: thumbnail, snippet: sample };\n        });\n        setlinks(urls);\n      });\n  };\n\n  useEffect(() => {\n    get_gainers();\n    get_losers();\n    get_most_actives();\n    get_news(\"finance\");\n    setTimeout(() => setcurrent(actives), 3000);\n  }, []);\n\n  return (\n    <ScrollView>\n      <View style={{ flexDirection: \"row\", justifyContent: \"center\" }}>\n        <TouchableOpacity onPress={() => setcurrent(gainers)}>\n          <Text style={{ margin: 10 }}>Gainers</Text>\n        </TouchableOpacity>\n        <TouchableOpacity onPress={() => setcurrent(actives)}>\n          <Text style={{ margin: 10 }}>Most-Active</Text>\n        </TouchableOpacity>\n        <TouchableOpacity onPress={() => setcurrent(losers)}>\n          <Text style={{ margin: 10 }}>Losers</Text>\n        </TouchableOpacity>\n      </View>\n\n      <View style={styles.stock}>\n        <Text style={{ width: \"30%\", marginLeft: 20 }}>Ticker</Text>\n        <Text style={{ width: \"23%\", textAlign: \"right\" }}>Price</Text>\n        <Text style={{ width: \"23%\", textAlign: \"right\" }}>24h</Text>\n        <Text style={{ width: \"23%\", textAlign: \"right\", marginRight: 20 }}>\n          Volume\n        </Text>\n      </View>\n\n      {current.map((x, i) => (\n        <TouchableOpacity\n          key={i}\n          onPress={() => navigation.navigate(\"stock\", { x })}\n          style={styles.stock}\n        >\n          <Text style={{ width: \"30%\", marginLeft: 20, color: \"#474747\" }}>\n            {x.ticker}\n          </Text>\n          <Text\n            style={{\n              width: \"23%\",\n              textAlign: \"right\",\n              color: \"#474747\",\n            }}\n          >\n            {x.price}\n          </Text>\n          <Text\n            style={{\n              ...{ width: \"23%\", textAlign: \"right\", color: \"#474747\" },\n              ...(x.pchange.includes(\"+\")\n                ? { color: \"green\" }\n                : { color: \"red\" }),\n            }}\n          >\n            {x.pchange}\n          </Text>\n          <Text\n            style={{\n              width: \"23%\",\n              textAlign: \"right\",\n              marginRight: 20,\n              color: \"#474747\",\n            }}\n          >\n            {x.volume}\n          </Text>\n        </TouchableOpacity>\n      ))}\n\n      <Text style={{ marginLeft: 20, marginTop: 30 }}>Latest News</Text>\n\n      {links.map((x, i) => {\n        return <ArticleLink x={x} key={i} />;\n      })}\n    </ScrollView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  stock: {\n    borderWidth: StyleSheet.hairlineWidth,\n    flexDirection: \"row\",\n    justifyContent: \"center\",\n    backgroundColor: \"white\",\n    borderTopWidth: 0,\n    borderColor: \"#ededed\",\n  },\n});\n\nexport default Feed;\n"]},"metadata":{},"sourceType":"module"}