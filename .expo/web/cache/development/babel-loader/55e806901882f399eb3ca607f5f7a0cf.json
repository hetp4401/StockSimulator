{"ast":null,"code":"'use strict';\n\nvar DOCUMENT_MODE = require(\"../common/html\").DOCUMENT_MODE;\n\nexports.createDocument = function () {\n  return {\n    nodeName: '#document',\n    mode: DOCUMENT_MODE.NO_QUIRKS,\n    childNodes: []\n  };\n};\n\nexports.createDocumentFragment = function () {\n  return {\n    nodeName: '#document-fragment',\n    childNodes: []\n  };\n};\n\nexports.createElement = function (tagName, namespaceURI, attrs) {\n  return {\n    nodeName: tagName,\n    tagName: tagName,\n    attrs: attrs,\n    namespaceURI: namespaceURI,\n    childNodes: [],\n    parentNode: null\n  };\n};\n\nexports.createCommentNode = function (data) {\n  return {\n    nodeName: '#comment',\n    data: data,\n    parentNode: null\n  };\n};\n\nvar createTextNode = function createTextNode(value) {\n  return {\n    nodeName: '#text',\n    value: value,\n    parentNode: null\n  };\n};\n\nvar appendChild = exports.appendChild = function (parentNode, newNode) {\n  parentNode.childNodes.push(newNode);\n  newNode.parentNode = parentNode;\n};\n\nvar insertBefore = exports.insertBefore = function (parentNode, newNode, referenceNode) {\n  var insertionIdx = parentNode.childNodes.indexOf(referenceNode);\n  parentNode.childNodes.splice(insertionIdx, 0, newNode);\n  newNode.parentNode = parentNode;\n};\n\nexports.setTemplateContent = function (templateElement, contentElement) {\n  templateElement.content = contentElement;\n};\n\nexports.getTemplateContent = function (templateElement) {\n  return templateElement.content;\n};\n\nexports.setDocumentType = function (document, name, publicId, systemId) {\n  var doctypeNode = null;\n\n  for (var i = 0; i < document.childNodes.length; i++) {\n    if (document.childNodes[i].nodeName === '#documentType') {\n      doctypeNode = document.childNodes[i];\n      break;\n    }\n  }\n\n  if (doctypeNode) {\n    doctypeNode.name = name;\n    doctypeNode.publicId = publicId;\n    doctypeNode.systemId = systemId;\n  } else {\n    appendChild(document, {\n      nodeName: '#documentType',\n      name: name,\n      publicId: publicId,\n      systemId: systemId\n    });\n  }\n};\n\nexports.setDocumentMode = function (document, mode) {\n  document.mode = mode;\n};\n\nexports.getDocumentMode = function (document) {\n  return document.mode;\n};\n\nexports.detachNode = function (node) {\n  if (node.parentNode) {\n    var idx = node.parentNode.childNodes.indexOf(node);\n    node.parentNode.childNodes.splice(idx, 1);\n    node.parentNode = null;\n  }\n};\n\nexports.insertText = function (parentNode, text) {\n  if (parentNode.childNodes.length) {\n    var prevNode = parentNode.childNodes[parentNode.childNodes.length - 1];\n\n    if (prevNode.nodeName === '#text') {\n      prevNode.value += text;\n      return;\n    }\n  }\n\n  appendChild(parentNode, createTextNode(text));\n};\n\nexports.insertTextBefore = function (parentNode, text, referenceNode) {\n  var prevNode = parentNode.childNodes[parentNode.childNodes.indexOf(referenceNode) - 1];\n  if (prevNode && prevNode.nodeName === '#text') prevNode.value += text;else insertBefore(parentNode, createTextNode(text), referenceNode);\n};\n\nexports.adoptAttributes = function (recipientNode, attrs) {\n  var recipientAttrsMap = [];\n\n  for (var i = 0; i < recipientNode.attrs.length; i++) {\n    recipientAttrsMap.push(recipientNode.attrs[i].name);\n  }\n\n  for (var j = 0; j < attrs.length; j++) {\n    if (recipientAttrsMap.indexOf(attrs[j].name) === -1) recipientNode.attrs.push(attrs[j]);\n  }\n};\n\nexports.getFirstChild = function (node) {\n  return node.childNodes[0];\n};\n\nexports.getChildNodes = function (node) {\n  return node.childNodes;\n};\n\nexports.getParentNode = function (node) {\n  return node.parentNode;\n};\n\nexports.getAttrList = function (node) {\n  return node.attrs;\n};\n\nexports.getTagName = function (element) {\n  return element.tagName;\n};\n\nexports.getNamespaceURI = function (element) {\n  return element.namespaceURI;\n};\n\nexports.getTextNodeContent = function (textNode) {\n  return textNode.value;\n};\n\nexports.getCommentNodeContent = function (commentNode) {\n  return commentNode.data;\n};\n\nexports.getDocumentTypeNodeName = function (doctypeNode) {\n  return doctypeNode.name;\n};\n\nexports.getDocumentTypeNodePublicId = function (doctypeNode) {\n  return doctypeNode.publicId;\n};\n\nexports.getDocumentTypeNodeSystemId = function (doctypeNode) {\n  return doctypeNode.systemId;\n};\n\nexports.isTextNode = function (node) {\n  return node.nodeName === '#text';\n};\n\nexports.isCommentNode = function (node) {\n  return node.nodeName === '#comment';\n};\n\nexports.isDocumentTypeNode = function (node) {\n  return node.nodeName === '#documentType';\n};\n\nexports.isElementNode = function (node) {\n  return !!node.tagName;\n};","map":{"version":3,"sources":["/Users/adarsh/Documents/StocksUI/node_modules/react-native-parse-html/lib/tree_adapters/default.js"],"names":["DOCUMENT_MODE","require","exports","createDocument","nodeName","mode","NO_QUIRKS","childNodes","createDocumentFragment","createElement","tagName","namespaceURI","attrs","parentNode","createCommentNode","data","createTextNode","value","appendChild","newNode","push","insertBefore","referenceNode","insertionIdx","indexOf","splice","setTemplateContent","templateElement","contentElement","content","getTemplateContent","setDocumentType","document","name","publicId","systemId","doctypeNode","i","length","setDocumentMode","getDocumentMode","detachNode","node","idx","insertText","text","prevNode","insertTextBefore","adoptAttributes","recipientNode","recipientAttrsMap","j","getFirstChild","getChildNodes","getParentNode","getAttrList","getTagName","element","getNamespaceURI","getTextNodeContent","textNode","getCommentNodeContent","commentNode","getDocumentTypeNodeName","getDocumentTypeNodePublicId","getDocumentTypeNodeSystemId","isTextNode","isCommentNode","isDocumentTypeNode","isElementNode"],"mappings":"AAAA;;AAEA,IAAIA,aAAa,GAAGC,OAAO,kBAAP,CAA0BD,aAA9C;;AAkBAE,OAAO,CAACC,cAAR,GAAyB,YAAY;AACjC,SAAO;AACHC,IAAAA,QAAQ,EAAE,WADP;AAEHC,IAAAA,IAAI,EAAEL,aAAa,CAACM,SAFjB;AAGHC,IAAAA,UAAU,EAAE;AAHT,GAAP;AAKH,CAND;;AAiBAL,OAAO,CAACM,sBAAR,GAAiC,YAAY;AACzC,SAAO;AACHJ,IAAAA,QAAQ,EAAE,oBADP;AAEHG,IAAAA,UAAU,EAAE;AAFT,GAAP;AAIH,CALD;;AAsBAL,OAAO,CAACO,aAAR,GAAwB,UAAUC,OAAV,EAAmBC,YAAnB,EAAiCC,KAAjC,EAAwC;AAC5D,SAAO;AACHR,IAAAA,QAAQ,EAAEM,OADP;AAEHA,IAAAA,OAAO,EAAEA,OAFN;AAGHE,IAAAA,KAAK,EAAEA,KAHJ;AAIHD,IAAAA,YAAY,EAAEA,YAJX;AAKHJ,IAAAA,UAAU,EAAE,EALT;AAMHM,IAAAA,UAAU,EAAE;AANT,GAAP;AAQH,CATD;;AAuBAX,OAAO,CAACY,iBAAR,GAA4B,UAAUC,IAAV,EAAgB;AACxC,SAAO;AACHX,IAAAA,QAAQ,EAAE,UADP;AAEHW,IAAAA,IAAI,EAAEA,IAFH;AAGHF,IAAAA,UAAU,EAAE;AAHT,GAAP;AAKH,CAND;;AAQA,IAAIG,cAAc,GAAG,SAAjBA,cAAiB,CAAUC,KAAV,EAAiB;AAClC,SAAO;AACHb,IAAAA,QAAQ,EAAE,OADP;AAEHa,IAAAA,KAAK,EAAEA,KAFJ;AAGHJ,IAAAA,UAAU,EAAE;AAHT,GAAP;AAKH,CAND;;AAoBA,IAAIK,WAAW,GAAGhB,OAAO,CAACgB,WAAR,GAAsB,UAAUL,UAAV,EAAsBM,OAAtB,EAA+B;AACnEN,EAAAA,UAAU,CAACN,UAAX,CAAsBa,IAAtB,CAA2BD,OAA3B;AACAA,EAAAA,OAAO,CAACN,UAAR,GAAqBA,UAArB;AACH,CAHD;;AAgBA,IAAIQ,YAAY,GAAGnB,OAAO,CAACmB,YAAR,GAAuB,UAAUR,UAAV,EAAsBM,OAAtB,EAA+BG,aAA/B,EAA8C;AACpF,MAAIC,YAAY,GAAGV,UAAU,CAACN,UAAX,CAAsBiB,OAAtB,CAA8BF,aAA9B,CAAnB;AAEAT,EAAAA,UAAU,CAACN,UAAX,CAAsBkB,MAAtB,CAA6BF,YAA7B,EAA2C,CAA3C,EAA8CJ,OAA9C;AACAA,EAAAA,OAAO,CAACN,UAAR,GAAqBA,UAArB;AACH,CALD;;AAiBAX,OAAO,CAACwB,kBAAR,GAA6B,UAAUC,eAAV,EAA2BC,cAA3B,EAA2C;AACpED,EAAAA,eAAe,CAACE,OAAhB,GAA0BD,cAA1B;AACH,CAFD;;AAgBA1B,OAAO,CAAC4B,kBAAR,GAA6B,UAAUH,eAAV,EAA2B;AACpD,SAAOA,eAAe,CAACE,OAAvB;AACH,CAFD;;AAkBA3B,OAAO,CAAC6B,eAAR,GAA0B,UAAUC,QAAV,EAAoBC,IAApB,EAA0BC,QAA1B,EAAoCC,QAApC,EAA8C;AACpE,MAAIC,WAAW,GAAG,IAAlB;;AAEA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,QAAQ,CAACzB,UAAT,CAAoB+B,MAAxC,EAAgDD,CAAC,EAAjD,EAAqD;AACjD,QAAIL,QAAQ,CAACzB,UAAT,CAAoB8B,CAApB,EAAuBjC,QAAvB,KAAoC,eAAxC,EAAyD;AACrDgC,MAAAA,WAAW,GAAGJ,QAAQ,CAACzB,UAAT,CAAoB8B,CAApB,CAAd;AACA;AACH;AACJ;;AAED,MAAID,WAAJ,EAAiB;AACbA,IAAAA,WAAW,CAACH,IAAZ,GAAmBA,IAAnB;AACAG,IAAAA,WAAW,CAACF,QAAZ,GAAuBA,QAAvB;AACAE,IAAAA,WAAW,CAACD,QAAZ,GAAuBA,QAAvB;AACH,GAJD,MAMK;AACDjB,IAAAA,WAAW,CAACc,QAAD,EAAW;AAClB5B,MAAAA,QAAQ,EAAE,eADQ;AAElB6B,MAAAA,IAAI,EAAEA,IAFY;AAGlBC,MAAAA,QAAQ,EAAEA,QAHQ;AAIlBC,MAAAA,QAAQ,EAAEA;AAJQ,KAAX,CAAX;AAMH;AACJ,CAxBD;;AAoCAjC,OAAO,CAACqC,eAAR,GAA0B,UAAUP,QAAV,EAAoB3B,IAApB,EAA0B;AAChD2B,EAAAA,QAAQ,CAAC3B,IAAT,GAAgBA,IAAhB;AACH,CAFD;;AAcAH,OAAO,CAACsC,eAAR,GAA0B,UAAUR,QAAV,EAAoB;AAC1C,SAAOA,QAAQ,CAAC3B,IAAhB;AACH,CAFD;;AAYAH,OAAO,CAACuC,UAAR,GAAqB,UAAUC,IAAV,EAAgB;AACjC,MAAIA,IAAI,CAAC7B,UAAT,EAAqB;AACjB,QAAI8B,GAAG,GAAGD,IAAI,CAAC7B,UAAL,CAAgBN,UAAhB,CAA2BiB,OAA3B,CAAmCkB,IAAnC,CAAV;AAEAA,IAAAA,IAAI,CAAC7B,UAAL,CAAgBN,UAAhB,CAA2BkB,MAA3B,CAAkCkB,GAAlC,EAAuC,CAAvC;AACAD,IAAAA,IAAI,CAAC7B,UAAL,GAAkB,IAAlB;AACH;AACJ,CAPD;;AAoBAX,OAAO,CAAC0C,UAAR,GAAqB,UAAU/B,UAAV,EAAsBgC,IAAtB,EAA4B;AAC7C,MAAIhC,UAAU,CAACN,UAAX,CAAsB+B,MAA1B,EAAkC;AAC9B,QAAIQ,QAAQ,GAAGjC,UAAU,CAACN,UAAX,CAAsBM,UAAU,CAACN,UAAX,CAAsB+B,MAAtB,GAA+B,CAArD,CAAf;;AAEA,QAAIQ,QAAQ,CAAC1C,QAAT,KAAsB,OAA1B,EAAmC;AAC/B0C,MAAAA,QAAQ,CAAC7B,KAAT,IAAkB4B,IAAlB;AACA;AACH;AACJ;;AAED3B,EAAAA,WAAW,CAACL,UAAD,EAAaG,cAAc,CAAC6B,IAAD,CAA3B,CAAX;AACH,CAXD;;AA2BA3C,OAAO,CAAC6C,gBAAR,GAA2B,UAAUlC,UAAV,EAAsBgC,IAAtB,EAA4BvB,aAA5B,EAA2C;AAClE,MAAIwB,QAAQ,GAAGjC,UAAU,CAACN,UAAX,CAAsBM,UAAU,CAACN,UAAX,CAAsBiB,OAAtB,CAA8BF,aAA9B,IAA+C,CAArE,CAAf;AAEA,MAAIwB,QAAQ,IAAIA,QAAQ,CAAC1C,QAAT,KAAsB,OAAtC,EACI0C,QAAQ,CAAC7B,KAAT,IAAkB4B,IAAlB,CADJ,KAGIxB,YAAY,CAACR,UAAD,EAAaG,cAAc,CAAC6B,IAAD,CAA3B,EAAmCvB,aAAnC,CAAZ;AACP,CAPD;;AAkBApB,OAAO,CAAC8C,eAAR,GAA0B,UAAUC,aAAV,EAAyBrC,KAAzB,EAAgC;AACtD,MAAIsC,iBAAiB,GAAG,EAAxB;;AAEA,OAAK,IAAIb,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGY,aAAa,CAACrC,KAAd,CAAoB0B,MAAxC,EAAgDD,CAAC,EAAjD;AACIa,IAAAA,iBAAiB,CAAC9B,IAAlB,CAAuB6B,aAAa,CAACrC,KAAd,CAAoByB,CAApB,EAAuBJ,IAA9C;AADJ;;AAGA,OAAK,IAAIkB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGvC,KAAK,CAAC0B,MAA1B,EAAkCa,CAAC,EAAnC,EAAuC;AACnC,QAAID,iBAAiB,CAAC1B,OAAlB,CAA0BZ,KAAK,CAACuC,CAAD,CAAL,CAASlB,IAAnC,MAA6C,CAAC,CAAlD,EACIgB,aAAa,CAACrC,KAAd,CAAoBQ,IAApB,CAAyBR,KAAK,CAACuC,CAAD,CAA9B;AACP;AACJ,CAVD;;AA0BAjD,OAAO,CAACkD,aAAR,GAAwB,UAAUV,IAAV,EAAgB;AACpC,SAAOA,IAAI,CAACnC,UAAL,CAAgB,CAAhB,CAAP;AACH,CAFD;;AAeAL,OAAO,CAACmD,aAAR,GAAwB,UAAUX,IAAV,EAAgB;AACpC,SAAOA,IAAI,CAACnC,UAAZ;AACH,CAFD;;AAeAL,OAAO,CAACoD,aAAR,GAAwB,UAAUZ,IAAV,EAAgB;AACpC,SAAOA,IAAI,CAAC7B,UAAZ;AACH,CAFD;;AAgBAX,OAAO,CAACqD,WAAR,GAAsB,UAAUb,IAAV,EAAgB;AAClC,SAAOA,IAAI,CAAC9B,KAAZ;AACH,CAFD;;AAiBAV,OAAO,CAACsD,UAAR,GAAqB,UAAUC,OAAV,EAAmB;AACpC,SAAOA,OAAO,CAAC/C,OAAf;AACH,CAFD;;AAeAR,OAAO,CAACwD,eAAR,GAA0B,UAAUD,OAAV,EAAmB;AACzC,SAAOA,OAAO,CAAC9C,YAAf;AACH,CAFD;;AAeAT,OAAO,CAACyD,kBAAR,GAA6B,UAAUC,QAAV,EAAoB;AAC7C,SAAOA,QAAQ,CAAC3C,KAAhB;AACH,CAFD;;AAeAf,OAAO,CAAC2D,qBAAR,GAAgC,UAAUC,WAAV,EAAuB;AACnD,SAAOA,WAAW,CAAC/C,IAAnB;AACH,CAFD;;AAeAb,OAAO,CAAC6D,uBAAR,GAAkC,UAAU3B,WAAV,EAAuB;AACrD,SAAOA,WAAW,CAACH,IAAnB;AACH,CAFD;;AAeA/B,OAAO,CAAC8D,2BAAR,GAAsC,UAAU5B,WAAV,EAAuB;AACzD,SAAOA,WAAW,CAACF,QAAnB;AACH,CAFD;;AAeAhC,OAAO,CAAC+D,2BAAR,GAAsC,UAAU7B,WAAV,EAAuB;AACzD,SAAOA,WAAW,CAACD,QAAnB;AACH,CAFD;;AAgBAjC,OAAO,CAACgE,UAAR,GAAqB,UAAUxB,IAAV,EAAgB;AACjC,SAAOA,IAAI,CAACtC,QAAL,KAAkB,OAAzB;AACH,CAFD;;AAeAF,OAAO,CAACiE,aAAR,GAAwB,UAAUzB,IAAV,EAAgB;AACpC,SAAOA,IAAI,CAACtC,QAAL,KAAkB,UAAzB;AACH,CAFD;;AAeAF,OAAO,CAACkE,kBAAR,GAA6B,UAAU1B,IAAV,EAAgB;AACzC,SAAOA,IAAI,CAACtC,QAAL,KAAkB,eAAzB;AACH,CAFD;;AAeAF,OAAO,CAACmE,aAAR,GAAwB,UAAU3B,IAAV,EAAgB;AACpC,SAAO,CAAC,CAACA,IAAI,CAAChC,OAAd;AACH,CAFD","sourcesContent":["'use strict';\n\nvar DOCUMENT_MODE = require('../common/html').DOCUMENT_MODE;\n\n/**\n * @typedef {Object} TreeAdapter\n * @see {@link https://github.com/inikulin/parse5/blob/master/lib/tree_adapters/default.js|default implementation.}\n */\n\n//Node construction\n\n/**\n * Creates a document node.\n *\n * @function createDocument\n * @memberof TreeAdapter\n *\n * @returns {ASTNode<Document>} document\n *\n */\nexports.createDocument = function () {\n    return {\n        nodeName: '#document',\n        mode: DOCUMENT_MODE.NO_QUIRKS,\n        childNodes: []\n    };\n};\n\n/**\n * Creates a document fragment node.\n *\n * @function createDocumentFragment\n * @memberof TreeAdapter\n *\n * @returns {ASTNode<DocumentFragment>} fragment\n *\n */\nexports.createDocumentFragment = function () {\n    return {\n        nodeName: '#document-fragment',\n        childNodes: []\n    };\n};\n\n\n/**\n * Creates an element node.\n *\n * @function createElement\n * @memberof TreeAdapter\n *\n * @param {String} tagName - Tag name of the element.\n * @param {String} namespaceURI - Namespace of the element.\n * @param {Array}  attrs - Attribute name-value pair array.\n *                         Foreign attributes may contain `namespace` and `prefix` fields as well.\n *\n * @returns {ASTNode<Element>} element\n *\n */\nexports.createElement = function (tagName, namespaceURI, attrs) {\n    return {\n        nodeName: tagName,\n        tagName: tagName,\n        attrs: attrs,\n        namespaceURI: namespaceURI,\n        childNodes: [],\n        parentNode: null\n    };\n};\n\n\n/**\n * Creates a comment node.\n *\n * @function createCommentNode\n * @memberof TreeAdapter\n *\n * @param {String} data - Comment text.\n *\n * @returns {ASTNode<CommentNode>} comment\n *\n */\nexports.createCommentNode = function (data) {\n    return {\n        nodeName: '#comment',\n        data: data,\n        parentNode: null\n    };\n};\n\nvar createTextNode = function (value) {\n    return {\n        nodeName: '#text',\n        value: value,\n        parentNode: null\n    };\n};\n\n\n//Tree mutation\n/**\n * Appends a child node to the given parent node.\n *\n * @function appendChild\n * @memberof TreeAdapter\n *\n * @param {ASTNode} parentNode - Parent node.\n * @param {ASTNode} newNode -  Child node.\n *\n */\nvar appendChild = exports.appendChild = function (parentNode, newNode) {\n    parentNode.childNodes.push(newNode);\n    newNode.parentNode = parentNode;\n};\n\n/**\n * Inserts a child node to the given parent node before the given reference node.\n *\n * @function insertBefore\n * @memberof TreeAdapter\n *\n * @param {ASTNode} parentNode - Parent node.\n * @param {ASTNode} newNode -  Child node.\n * @param {ASTNode} referenceNode -  Reference node.\n *\n */\nvar insertBefore = exports.insertBefore = function (parentNode, newNode, referenceNode) {\n    var insertionIdx = parentNode.childNodes.indexOf(referenceNode);\n\n    parentNode.childNodes.splice(insertionIdx, 0, newNode);\n    newNode.parentNode = parentNode;\n};\n\n/**\n * Sets the `<template>` element content element.\n *\n * @function setTemplateContent\n * @memberof TreeAdapter\n *\n * @param {ASTNode<TemplateElement>} templateElement - `<template>` element.\n * @param {ASTNode<DocumentFragment>} contentTemplate -  Content element.\n *\n */\nexports.setTemplateContent = function (templateElement, contentElement) {\n    templateElement.content = contentElement;\n};\n\n\n/**\n * Returns the `<template>` element content element.\n *\n * @function getTemplateContent\n * @memberof TreeAdapter\n *\n * @param {ASTNode<TemplateElement>} templateElement - `<template>` element.\n\n * @returns {ASTNode<DocumentFragment>}\n *\n */\nexports.getTemplateContent = function (templateElement) {\n    return templateElement.content;\n};\n\n/**\n * Sets the document type. If the `document` already contains a document type node, the `name`, `publicId` and `systemId`\n * properties of this node will be updated with the provided values. Otherwise, creates a new document type node\n * with the given properties and inserts it into the `document`.\n *\n * @function setDocumentType\n * @memberof TreeAdapter\n *\n * @param {ASTNode<Document>} document - Document node.\n * @param {String} name -  Document type name.\n * @param {String} publicId - Document type public identifier.\n * @param {String} systemId - Document type system identifier.\n *\n */\nexports.setDocumentType = function (document, name, publicId, systemId) {\n    var doctypeNode = null;\n\n    for (var i = 0; i < document.childNodes.length; i++) {\n        if (document.childNodes[i].nodeName === '#documentType') {\n            doctypeNode = document.childNodes[i];\n            break;\n        }\n    }\n\n    if (doctypeNode) {\n        doctypeNode.name = name;\n        doctypeNode.publicId = publicId;\n        doctypeNode.systemId = systemId;\n    }\n\n    else {\n        appendChild(document, {\n            nodeName: '#documentType',\n            name: name,\n            publicId: publicId,\n            systemId: systemId\n        });\n    }\n};\n\n/**\n * Sets the {@link https://dom.spec.whatwg.org/#concept-document-limited-quirks|document mode}.\n *\n * @function setDocumentMode\n * @memberof TreeAdapter\n *\n * @param {ASTNode<Document>} document - Document node.\n * @param {String} mode - Document mode.\n *\n */\nexports.setDocumentMode = function (document, mode) {\n    document.mode = mode;\n};\n\n/**\n * Returns {@link https://dom.spec.whatwg.org/#concept-document-limited-quirks|document mode}.\n *\n * @function getDocumentMode\n * @memberof TreeAdapter\n *\n * @param {ASTNode<Document>} document - Document node.\n * @returns {String} mode\n *\n */\nexports.getDocumentMode = function (document) {\n    return document.mode;\n};\n\n/**\n * Removes a node from its parent.\n *\n * @function detachNode\n * @memberof TreeAdapter\n *\n * @param {ASTNode} node - Node.\n */\nexports.detachNode = function (node) {\n    if (node.parentNode) {\n        var idx = node.parentNode.childNodes.indexOf(node);\n\n        node.parentNode.childNodes.splice(idx, 1);\n        node.parentNode = null;\n    }\n};\n\n/**\n * Inserts text into a node. If the last child of the node is a text node, the provided text will be appended to the\n * text node content. Otherwise, inserts a new text node with the given text.\n *\n *\n * @function insertText\n * @memberof TreeAdapter\n *\n * @param {ASTNode} parentNode - Node to insert text into.\n * @param {String} text - Text to insert.\n */\nexports.insertText = function (parentNode, text) {\n    if (parentNode.childNodes.length) {\n        var prevNode = parentNode.childNodes[parentNode.childNodes.length - 1];\n\n        if (prevNode.nodeName === '#text') {\n            prevNode.value += text;\n            return;\n        }\n    }\n\n    appendChild(parentNode, createTextNode(text));\n};\n\n/**\n * Inserts text into a sibling node that goes before the reference node. If this sibling node is the text node,\n * the provided text will be appended to the text node content. Otherwise, inserts a new sibling text node with\n * the given text before the reference node.\n *\n *\n * @function insertTextBefore\n * @memberof TreeAdapter\n *\n * @param {ASTNode} parentNode - Node to insert text into.\n * @param {String} text - Text to insert.\n * @param {ASTNode} referenceNode - Node to insert text before.\n *\n */\nexports.insertTextBefore = function (parentNode, text, referenceNode) {\n    var prevNode = parentNode.childNodes[parentNode.childNodes.indexOf(referenceNode) - 1];\n\n    if (prevNode && prevNode.nodeName === '#text')\n        prevNode.value += text;\n    else\n        insertBefore(parentNode, createTextNode(text), referenceNode);\n};\n\n/**\n * Copies attributes to the given node. Only attributes that are not yet present in the node are copied.\n *\n * @function adoptAttributes\n * @memberof TreeAdapter\n *\n * @param {ASTNode} recipientNode - Node to copy attributes into.\n * @param {Array} attrs - Attributes to copy.\n */\nexports.adoptAttributes = function (recipientNode, attrs) {\n    var recipientAttrsMap = [];\n\n    for (var i = 0; i < recipientNode.attrs.length; i++)\n        recipientAttrsMap.push(recipientNode.attrs[i].name);\n\n    for (var j = 0; j < attrs.length; j++) {\n        if (recipientAttrsMap.indexOf(attrs[j].name) === -1)\n            recipientNode.attrs.push(attrs[j]);\n    }\n};\n\n\n//Tree traversing\n\n/**\n * Returns the first child of the given node.\n *\n * @function getFirstChild\n * @memberof TreeAdapter\n *\n * @param {ASTNode} node - Node.\n *\n * @returns {ASTNode} firstChild\n *\n */\nexports.getFirstChild = function (node) {\n    return node.childNodes[0];\n};\n\n/**\n * Returns the given node's children in an array.\n *\n * @function getChildNodes\n * @memberof TreeAdapter\n *\n * @param {ASTNode} node - Node.\n *\n * @returns {Array} children\n *\n */\nexports.getChildNodes = function (node) {\n    return node.childNodes;\n};\n\n/**\n * Returns the given node's parent.\n *\n * @function getParentNode\n * @memberof TreeAdapter\n *\n * @param {ASTNode} node - Node.\n *\n * @returns {ASTNode} parent\n *\n */\nexports.getParentNode = function (node) {\n    return node.parentNode;\n};\n\n/**\n * Returns the given node's attributes in an array, in the form of name-value pairs.\n * Foreign attributes may contain `namespace` and `prefix` fields as well.\n *\n * @function getAttrList\n * @memberof TreeAdapter\n *\n * @param {ASTNode} node - Node.\n *\n * @returns {Array} attributes\n *\n */\nexports.getAttrList = function (node) {\n    return node.attrs;\n};\n\n//Node data\n\n/**\n * Returns the given element's tag name.\n *\n * @function getTagName\n * @memberof TreeAdapter\n *\n * @param {ASTNode<Element>} element - Element.\n *\n * @returns {String} tagName\n *\n */\nexports.getTagName = function (element) {\n    return element.tagName;\n};\n\n/**\n * Returns the given element's namespace.\n *\n * @function getNamespaceURI\n * @memberof TreeAdapter\n *\n * @param {ASTNode<Element>} element - Element.\n *\n * @returns {String} namespaceURI\n *\n */\nexports.getNamespaceURI = function (element) {\n    return element.namespaceURI;\n};\n\n/**\n * Returns the given text node's content.\n *\n * @function getTextNodeContent\n * @memberof TreeAdapter\n *\n * @param {ASTNode<Text>} textNode - Text node.\n *\n * @returns {String} text\n *\n */\nexports.getTextNodeContent = function (textNode) {\n    return textNode.value;\n};\n\n/**\n * Returns the given comment node's content.\n *\n * @function getCommentNodeContent\n * @memberof TreeAdapter\n *\n * @param {ASTNode<Comment>} commentNode - Comment node.\n *\n * @returns {String} commentText\n *\n */\nexports.getCommentNodeContent = function (commentNode) {\n    return commentNode.data;\n};\n\n/**\n * Returns the given document type node's name.\n *\n * @function getDocumentTypeNodeName\n * @memberof TreeAdapter\n *\n * @param {ASTNode<DocumentType>} doctypeNode - Document type node.\n *\n * @returns {String} name\n *\n */\nexports.getDocumentTypeNodeName = function (doctypeNode) {\n    return doctypeNode.name;\n};\n\n/**\n * Returns the given document type node's public identifier.\n *\n * @function getDocumentTypeNodePublicId\n * @memberof TreeAdapter\n *\n * @param {ASTNode<DocumentType>} doctypeNode - Document type node.\n *\n * @returns {String} publicId\n *\n */\nexports.getDocumentTypeNodePublicId = function (doctypeNode) {\n    return doctypeNode.publicId;\n};\n\n/**\n * Returns the given document type node's system identifier.\n *\n * @function getDocumentTypeNodeSystemId\n * @memberof TreeAdapter\n *\n * @param {ASTNode<DocumentType>} doctypeNode - Document type node.\n *\n * @returns {String} systemId\n *\n */\nexports.getDocumentTypeNodeSystemId = function (doctypeNode) {\n    return doctypeNode.systemId;\n};\n\n//Node types\n/**\n * Determines if the given node is a text node.\n *\n * @function isTextNode\n * @memberof TreeAdapter\n *\n * @param {ASTNode} node - Node.\n *\n * @returns {Boolean}\n *\n */\nexports.isTextNode = function (node) {\n    return node.nodeName === '#text';\n};\n\n/**\n * Determines if the given node is a comment node.\n *\n * @function isCommentNode\n * @memberof TreeAdapter\n *\n * @param {ASTNode} node - Node.\n *\n * @returns {Boolean}\n *\n */\nexports.isCommentNode = function (node) {\n    return node.nodeName === '#comment';\n};\n\n/**\n * Determines if the given node is a document type node.\n *\n * @function isDocumentTypeNode\n * @memberof TreeAdapter\n *\n * @param {ASTNode} node - Node.\n *\n * @returns {Boolean}\n *\n */\nexports.isDocumentTypeNode = function (node) {\n    return node.nodeName === '#documentType';\n};\n\n/**\n * Determines if the given node is an element.\n *\n * @function isElementNode\n * @memberof TreeAdapter\n *\n * @param {ASTNode} node - Node.\n *\n * @returns {Boolean}\n *\n */\nexports.isElementNode = function (node) {\n    return !!node.tagName;\n};\n"]},"metadata":{},"sourceType":"script"}