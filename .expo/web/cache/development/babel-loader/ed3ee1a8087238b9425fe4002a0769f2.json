{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/adarsh/Documents/StocksUI/Components/Stock.js\";\nimport React, { useState, useEffect } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport { av_key } from \"../config\";\nimport Chart from \"./Chart\";\nimport ArticleLink from \"./ArticleLink\";\nimport Ionicons from \"@expo/vector-icons/Ionicons\";\n\nvar Parser = require(\"fast-html-parser\");\n\nvar Stock = function Stock(_ref) {\n  var route = _ref.route,\n      navigation = _ref.navigation;\n  var _route$params$x = route.params.x,\n      ticker = _route$params$x.ticker,\n      name = _route$params$x.name;\n\n  var _useState = useState([\"\"]),\n      _useState2 = _slicedToArray(_useState, 2),\n      slables = _useState2[0],\n      setslables = _useState2[1];\n\n  var _useState3 = useState([0]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      prices = _useState4[0],\n      setprices = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      price = _useState6[0],\n      setprice = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      high = _useState8[0],\n      sethigh = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      low = _useState10[0],\n      setlow = _useState10[1];\n\n  var _useState11 = useState(\"\"),\n      _useState12 = _slicedToArray(_useState11, 2),\n      volume = _useState12[0],\n      setvolume = _useState12[1];\n\n  var _useState13 = useState(\"\"),\n      _useState14 = _slicedToArray(_useState13, 2),\n      change = _useState14[0],\n      setchange = _useState14[1];\n\n  var _useState15 = useState(false),\n      _useState16 = _slicedToArray(_useState15, 2),\n      favourite = _useState16[0],\n      setfavourite = _useState16[1];\n\n  var _useState17 = useState([]),\n      _useState18 = _slicedToArray(_useState17, 2),\n      links = _useState18[0],\n      setlinks = _useState18[1];\n\n  var _useState19 = useState(true),\n      _useState20 = _slicedToArray(_useState19, 2),\n      loading = _useState20[0],\n      setloading = _useState20[1];\n\n  var _useState21 = useState(true),\n      _useState22 = _slicedToArray(_useState21, 2),\n      loading2 = _useState22[0],\n      setloading2 = _useState22[1];\n\n  var _useState23 = useState(5),\n      _useState24 = _slicedToArray(_useState23, 2),\n      selected = _useState24[0],\n      setselected = _useState24[1];\n\n  var get_intraday = function get_intraday(interval) {\n    fetch(\"https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol=\" + ticker + \"&interval=\" + interval + \"min&apikey=\" + av_key).then(function (res) {\n      return res.json();\n    }).then(function (resJson) {\n      var raw_data = resJson[\"Time Series (\" + interval + \"min)\"];\n      var processed_data = [];\n      var label_data = [];\n      var counter = 1;\n\n      for (var obj in raw_data) {\n        var _price = raw_data[obj];\n        processed_data.unshift(parseFloat(_price[\"1. open\"]));\n        label_data.unshift(counter % 20 == 0 || counter == 1 ? obj.substr(-8, 5) : \"\");\n        counter += 1;\n      }\n\n      setprices(processed_data);\n      setslables(label_data);\n      setloading(false);\n    });\n  };\n\n  var get_quote = function get_quote() {\n    fetch(\"https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=\" + ticker + \"&apikey=\" + av_key).then(function (res) {\n      return res.json();\n    }).then(function (resJson) {\n      var data = resJson[\"Global Quote\"];\n      var vals = Object.values(data);\n      setprice(vals[4]);\n      sethigh(vals[2]);\n      setlow(vals[3]);\n      setvolume(vals[5]);\n      setchange(vals[9]);\n    });\n  };\n\n  var get_news = function get_news() {\n    fetch(\"https://www.bing.com/news/search?q=\" + name).then(function (res) {\n      return res.text();\n    }).then(function (body) {\n      var html = Parser.parse(body);\n      var arr = html.querySelectorAll(\".news-card.newsitem.cardcommon.b_cards2\");\n      var urls = arr.map(function (x) {\n        var url = x.rawAttributes.url;\n        var imgobj = x.querySelector(\"img\").rawAttributes;\n        var thumbnail = \"https://www.bing.com\" + (\"data-src\" in imgobj ? imgobj[\"data-src\"] : imgobj.src);\n        var sample = x.querySelector(\".snippet\").rawAttributes.title;\n        return {\n          link: url,\n          img: thumbnail,\n          snippet: sample\n        };\n      });\n      setlinks(urls);\n      setloading2(false);\n    });\n  };\n\n  var change_select = function change_select(x) {\n    setselected(x);\n    get_intraday(x);\n  };\n\n  var handleChange = function handleChange() {\n    setfavourite(function (prevState) {\n      return !prevState;\n    });\n  };\n\n  useEffect(function () {\n    get_intraday(5);\n    get_quote();\n    get_news();\n  }, []);\n  return loading ? React.createElement(ActivityIndicator, {\n    size: 100,\n    color: \"#0000ff\",\n    style: {\n      marginTop: Dimensions.get(\"window\").height * 0.5\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 5\n    }\n  }) : React.createElement(ScrollView, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 5\n    }\n  }, React.createElement(View, {\n    style: {\n      marginTop: 50\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }\n  }), React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }\n  }, ticker + \" - \" + name), React.createElement(View, {\n    style: {\n      alignItems: \"center\",\n      marginTop: 30\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }\n  }, React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return change_select(1);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: selected == 1 ? {\n      color: \"red\"\n    } : {\n      color: \"black\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 11\n    }\n  }, \"1min\")), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return change_select(5);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: selected == 5 ? {\n      color: \"red\"\n    } : {\n      color: \"black\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 11\n    }\n  }, \"5min\")), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return change_select(15);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: selected == 15 ? {\n      color: \"red\"\n    } : {\n      color: \"black\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 11\n    }\n  }, \"15min\")), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return change_select(30);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: selected == 30 ? {\n      color: \"red\"\n    } : {\n      color: \"black\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 11\n    }\n  }, \"30min\")), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return change_select(60);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: selected == 60 ? {\n      color: \"red\"\n    } : {\n      color: \"black\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 11\n    }\n  }, \"60min\"))), React.createElement(Chart, {\n    slables: slables,\n    prices: prices,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 7\n    }\n  }), React.createElement(View, {\n    style: {\n      alignItems: \"center\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 9\n    }\n  }, \"price - \" + price), React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 9\n    }\n  }, \"high - \" + high), React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 9\n    }\n  }, \"low - \" + low), React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 9\n    }\n  }, \"volume - \" + volume), React.createElement(Text, {\n    style: change.includes(\"-\") ? {\n      color: \"red\"\n    } : {\n      color: \"green\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 9\n    }\n  }, change)), React.createElement(View, {\n    style: {\n      alignItems: \"center\",\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignContent: \"center\",\n      justifyContent: \"center\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 7\n    }\n  }, React.createElement(Ionicons, {\n    name: favourite ? \"ios-star\" : \"ios-star-outline\",\n    size: \"30\",\n    color: 'blue',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 9\n    }\n  }), React.createElement(Button, {\n    title: \"Add to watchlist\",\n    onPress: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 9\n    }\n  })), React.createElement(Text, {\n    style: {\n      marginLeft: 20,\n      marginTop: 30\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 7\n    }\n  }, \"Latest News\"), React.createElement(View, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 7\n    }\n  }, loading2 ? React.createElement(ActivityIndicator, {\n    size: \"small\",\n    color: \"#0000ff\",\n    style: {\n      marginTop: 20\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 11\n    }\n  }) : links.map(function (x, i) {\n    return React.createElement(ArticleLink, {\n      x: x,\n      key: i,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 20\n      }\n    });\n  })));\n};\n\nexport default Stock;","map":{"version":3,"sources":["/Users/adarsh/Documents/StocksUI/Components/Stock.js"],"names":["React","useState","useEffect","av_key","Chart","ArticleLink","Ionicons","Parser","require","Stock","route","navigation","params","x","ticker","name","slables","setslables","prices","setprices","price","setprice","high","sethigh","low","setlow","volume","setvolume","change","setchange","favourite","setfavourite","links","setlinks","loading","setloading","loading2","setloading2","selected","setselected","get_intraday","interval","fetch","then","res","json","resJson","raw_data","processed_data","label_data","counter","obj","unshift","parseFloat","substr","get_quote","data","vals","Object","values","get_news","text","body","html","parse","arr","querySelectorAll","urls","map","url","rawAttributes","imgobj","querySelector","thumbnail","src","sample","title","link","img","snippet","change_select","handleChange","prevState","marginTop","Dimensions","get","height","alignItems","color","includes","display","flexDirection","alignContent","justifyContent","marginLeft","i"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n  View,\n  Text,\n  TouchableOpacity,\n  StyleSheet,\n  ScrollView,\n  ActivityIndicator,\n  Dimensions,\n  Button\n} from \"react-native\";\nimport { av_key } from \"../config\";\nimport Chart from \"./Chart\";\nimport ArticleLink from \"./ArticleLink\";\nimport Ionicons from 'react-native-vector-icons/Ionicons';\n\nconst Parser = require(\"fast-html-parser\");\n\nconst Stock = ({ route, navigation }) => {\n  const { ticker, name } = route.params.x;\n\n  const [slables, setslables] = useState([\"\"]);\n  const [prices, setprices] = useState([0]);\n  const [price, setprice] = useState(\"\");\n  const [high, sethigh] = useState(\"\");\n  const [low, setlow] = useState(\"\");\n  const [volume, setvolume] = useState(\"\");\n  const [change, setchange] = useState(\"\");\n  const [favourite, setfavourite] = useState(false);\n\n  const [links, setlinks] = useState([]);\n\n  const [loading, setloading] = useState(true);\n  const [loading2, setloading2] = useState(true);\n\n  const [selected, setselected] = useState(5);\n\n  const get_intraday = (interval) => {\n    fetch(\n      \"https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol=\" +\n        ticker +\n        \"&interval=\" +\n        interval +\n        \"min&apikey=\" +\n        av_key\n    )\n      .then((res) => res.json())\n      .then((resJson) => {\n        const raw_data = resJson[\"Time Series (\" + interval + \"min)\"];\n        const processed_data = [];\n        const label_data = [];\n        var counter = 1;\n        for (const obj in raw_data) {\n          const price = raw_data[obj];\n          processed_data.unshift(parseFloat(price[\"1. open\"]));\n          label_data.unshift(\n            counter % 20 == 0 || counter == 1 ? obj.substr(-8, 5) : \"\"\n          );\n          counter += 1;\n        }\n        setprices(processed_data);\n        setslables(label_data);\n        setloading(false);\n      });\n  };\n\n  const get_quote = () => {\n    fetch(\n      \"https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=\" +\n        ticker +\n        \"&apikey=\" +\n        av_key\n    )\n      .then((res) => res.json())\n      .then((resJson) => {\n        const data = resJson[\"Global Quote\"];\n        const vals = Object.values(data);\n        setprice(vals[4]);\n        sethigh(vals[2]);\n        setlow(vals[3]);\n        setvolume(vals[5]);\n        setchange(vals[9]);\n      });\n  };\n\n  const get_news = () => {\n    fetch(\"https://www.bing.com/news/search?q=\" + name)\n      .then((res) => res.text())\n      .then((body) => {\n        const html = Parser.parse(body);\n        const arr = html.querySelectorAll(\n          \".news-card.newsitem.cardcommon.b_cards2\"\n        );\n        const urls = arr.map((x) => {\n          const url = x.rawAttributes.url;\n          const imgobj = x.querySelector(\"img\").rawAttributes;\n          const thumbnail =\n            \"https://www.bing.com\" +\n            (\"data-src\" in imgobj ? imgobj[\"data-src\"] : imgobj.src);\n          const sample = x.querySelector(\".snippet\").rawAttributes.title;\n          return { link: url, img: thumbnail, snippet: sample };\n        });\n        setlinks(urls);\n        setloading2(false);\n      });\n  };\n\n  const change_select = (x) => {\n    setselected(x);\n    get_intraday(x);\n  };\n\n  const handleChange =() =>{\n    setfavourite(prevState => !prevState);\n  };\n\n  useEffect(() => {\n    get_intraday(5);\n    get_quote();\n    get_news();\n  }, []);\n\n  return loading ? (\n    <ActivityIndicator\n      size={100}\n      color=\"#0000ff\"\n      style={{ marginTop: Dimensions.get(\"window\").height * 0.5 }}\n    />\n  ) : (\n    <ScrollView>\n      <View style={{ marginTop: 50 }}></View>\n      <Text>{ticker + \" - \" + name}</Text>\n      <View style={{ alignItems: \"center\", marginTop: 30 }}>\n        <TouchableOpacity onPress={() => change_select(1)}>\n          <Text style={selected == 1 ? { color: \"red\" } : { color: \"black\" }}>\n            1min\n          </Text>\n        </TouchableOpacity>\n        <TouchableOpacity onPress={() => change_select(5)}>\n          <Text style={selected == 5 ? { color: \"red\" } : { color: \"black\" }}>\n            5min\n          </Text>\n        </TouchableOpacity>\n        <TouchableOpacity onPress={() => change_select(15)}>\n          <Text style={selected == 15 ? { color: \"red\" } : { color: \"black\" }}>\n            15min\n          </Text>\n        </TouchableOpacity>\n        <TouchableOpacity onPress={() => change_select(30)}>\n          <Text style={selected == 30 ? { color: \"red\" } : { color: \"black\" }}>\n            30min\n          </Text>\n        </TouchableOpacity>\n        <TouchableOpacity onPress={() => change_select(60)}>\n          <Text style={selected == 60 ? { color: \"red\" } : { color: \"black\" }}>\n            60min\n          </Text>\n        </TouchableOpacity>\n      </View>\n\n      <Chart slables={slables} prices={prices}></Chart>\n\n      <View style={{ alignItems: \"center\" }}>\n        <Text>{\"price - \" + price}</Text>\n        <Text>{\"high - \" + high}</Text>\n        <Text>{\"low - \" + low}</Text>\n        <Text>{\"volume - \" + volume}</Text>\n        <Text\n          style={change.includes(\"-\") ? { color: \"red\" } : { color: \"green\" }}\n        >\n          {change}\n        </Text>\n      </View>\n\n      <View style = {{alignItems: \"center\", display: \"flex\", flexDirection: \"row\" ,alignContent:\"center\", justifyContent:\"center\" }}>\n        <Ionicons \n          name={favourite ? \"ios-star\" : \"ios-star-outline\"}\n          size ={\"30\"} \n          color={'blue'} \n        />\n\n        <Button\n          title= 'Add to watchlist'\n          onPress = {handleChange} \n        />\n      </View> \n\n\n      <Text style={{ marginLeft: 20, marginTop: 30 }}>Latest News</Text>\n\n      <View>\n        {loading2 ? (\n          <ActivityIndicator\n            size=\"small\"\n            color=\"#0000ff\"\n            style={{ marginTop: 20 }}\n          />\n        ) : (\n          links.map((x, i) => {\n            return <ArticleLink x={x} key={i} />;\n          })\n        )}\n      </View>\n    </ScrollView>\n  );\n};\n\nexport default Stock;\n"]},"metadata":{},"sourceType":"module"}